import{r as n,j as e,R as Ye,a as So,s as Ge}from"./index-UkIvKgPy.js";import{p as _o,e as Co,g as ko,s as Mo}from"./realtimeSync-Ccs4uHqX.js";import{i as Ro,a as Eo,c as er,b as tr,d as Do,g as Po}from"./usageLimits-B5DWR5Ov.js";import{a as Io,g as sr,b as Ao,c as To,d as $o,r as Lo,f as Js}from"./razorpayApi-D6uxyQ4R.js";import{U as en}from"./UsageChart-DDzAler7.js";import{c as K,u as Ps,a as gt,b as qt,P as ee,d as $,e as jt,f as Ae,g as ks,S as un,h as mr,i as Yt,j as pt,k as ft,l as xr,m as Oo,n as Fo,o as Uo,p as Is,q as As,r as hr,R as zo,A as Go,s as Ko,t as Bo,v as Vo,w as Ho,x as qo,F as Wo,D as Qo,C as Yo,y as Xo,z as ae,B as pr,E as Zo,G as Jo,H as fr,I as gr,J as ei,K as ti,L as si,M as ni,N as ri,O as ai,Q as oi,T as ii,U as R,V as E,W as D,X as P,Y as I,Z as b,_ as G,$ as xt}from"./card-kPhyKK4t.js";const li=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],tn=K("arrow-up-down",li);const ci=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],di=K("badge-check",ci);const ui=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mi=K("bell",ui);const xi=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hi=K("check",xi);const pi=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jr=K("chevron-right",pi);const fi=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],gi=K("chevrons-up-down",fi);const ji=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vi=K("circle-check",ji);const bi=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vr=K("circle",bi);const yi=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],_s=K("clipboard",yi);const Ni=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],nr=K("command",Ni);const wi=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Kt=K("download",wi);const Si=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ht=K("ellipsis",Si);const _i=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],sn=K("folder-kanban",_i);const Ci=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ki=K("folder",Ci);const Mi=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],rr=K("funnel",Mi);const Ri=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ei=K("layout-dashboard",Ri);const Di=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pi=K("log-out",Di);const Ii=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ai=K("package",Ii);const Ti=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bt=K("refresh-cw",Ti);const $i=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Li=K("rocket",$i);const Oi=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cs=K("search",Oi);const Fi=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Ui=K("settings-2",Fi);const zi=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],Gi=K("share",zi);const Ki=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Bi=K("sparkles",Ki);const Vi=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hi=K("trash-2",Vi);var Ts="Collapsible",[qi]=gt(Ts),[Wi,mn]=qi(Ts),br=n.forwardRef((s,r)=>{const{__scopeCollapsible:a,open:o,defaultOpen:l,disabled:c,onOpenChange:x,...h}=s,[f,g]=Ps({prop:o,defaultProp:l??!1,onChange:x,caller:Ts});return e.jsx(Wi,{scope:a,disabled:c,contentId:qt(),open:f,onOpenToggle:n.useCallback(()=>g(u=>!u),[g]),children:e.jsx(ee.div,{"data-state":hn(f),"data-disabled":c?"":void 0,...h,ref:r})})});br.displayName=Ts;var yr="CollapsibleTrigger",Nr=n.forwardRef((s,r)=>{const{__scopeCollapsible:a,...o}=s,l=mn(yr,a);return e.jsx(ee.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":hn(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...o,ref:r,onClick:$(s.onClick,l.onOpenToggle)})});Nr.displayName=yr;var xn="CollapsibleContent",wr=n.forwardRef((s,r)=>{const{forceMount:a,...o}=s,l=mn(xn,s.__scopeCollapsible);return e.jsx(jt,{present:a||l.open,children:({present:c})=>e.jsx(Qi,{...o,ref:r,present:c})})});wr.displayName=xn;var Qi=n.forwardRef((s,r)=>{const{__scopeCollapsible:a,present:o,children:l,...c}=s,x=mn(xn,a),[h,f]=n.useState(o),g=n.useRef(null),u=Ae(r,g),m=n.useRef(0),v=m.current,M=n.useRef(0),C=M.current,w=x.open||h,S=n.useRef(w),T=n.useRef(void 0);return n.useEffect(()=>{const F=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(F)},[]),ks(()=>{const F=g.current;if(F){T.current=T.current||{transitionDuration:F.style.transitionDuration,animationName:F.style.animationName},F.style.transitionDuration="0s",F.style.animationName="none";const U=F.getBoundingClientRect();m.current=U.height,M.current=U.width,S.current||(F.style.transitionDuration=T.current.transitionDuration,F.style.animationName=T.current.animationName),f(o)}},[x.open,o]),e.jsx(ee.div,{"data-state":hn(x.open),"data-disabled":x.disabled?"":void 0,id:x.contentId,hidden:!w,...c,ref:u,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...s.style},children:w&&l})});function hn(s){return s?"open":"closed"}var Yi=br,Xi=Nr,Sr=wr;const Zi=Yi,Ji=Xi,_r=n.forwardRef(({...s},r)=>n.createElement(Sr,{ref:r,...s}));_r.displayName=Sr.displayName;function el({items:s,onNavigate:r,activePath:a}){return e.jsxs(un,{children:[e.jsx(mr,{children:"Platform"}),e.jsx(Yt,{children:s.map(o=>e.jsx(Zi,{asChild:!0,defaultOpen:o.isActive,children:e.jsxs(pt,{children:[e.jsx(ft,{asChild:!0,tooltip:o.title,isActive:!!(a&&o.url&&(a===o.url||o.url.startsWith("/dashboard-v2")&&a.startsWith("/dashboard-v2"))),children:e.jsxs("a",{href:o.url,onClick:l=>{l.preventDefault(),r?.(o.url)},children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})}),o.items?.length?e.jsxs(e.Fragment,{children:[e.jsx(Ji,{asChild:!0,children:e.jsxs(xr,{className:"data-[state=open]:rotate-90",children:[e.jsx(jr,{}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})}),e.jsx(_r,{children:e.jsx(Oo,{children:o.items?.map(l=>e.jsx(Fo,{children:e.jsx(Uo,{asChild:!0,children:e.jsx("a",{href:l.url,onClick:c=>{c.preventDefault(),r?.(l.url)},children:e.jsx("span",{children:l.title})})})},l.title))})})]}):null]})},o.title))})]})}function ar(s){const r=tl(s),a=n.forwardRef((o,l)=>{const{children:c,...x}=o,h=n.Children.toArray(c),f=h.find(nl);if(f){const g=f.props.children,u=h.map(m=>m===f?n.Children.count(g)>1?n.Children.only(null):n.isValidElement(g)?g.props.children:null:m);return e.jsx(r,{...x,ref:l,children:n.isValidElement(g)?n.cloneElement(g,void 0,u):null})}return e.jsx(r,{...x,ref:l,children:c})});return a.displayName=`${s}.Slot`,a}function tl(s){const r=n.forwardRef((a,o)=>{const{children:l,...c}=a;if(n.isValidElement(l)){const x=al(l),h=rl(c,l.props);return l.type!==n.Fragment&&(h.ref=o?Is(o,x):x),n.cloneElement(l,h)}return n.Children.count(l)>1?n.Children.only(null):null});return r.displayName=`${s}.SlotClone`,r}var sl=Symbol("radix.slottable");function nl(s){return n.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===sl}function rl(s,r){const a={...r};for(const o in r){const l=s[o],c=r[o];/^on[A-Z]/.test(o)?l&&c?a[o]=(...h)=>{const f=c(...h);return l(...h),f}:l&&(a[o]=l):o==="style"?a[o]={...l,...c}:o==="className"&&(a[o]=[l,c].filter(Boolean).join(" "))}return{...s,...a}}function al(s){let r=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?s.ref:(r=Object.getOwnPropertyDescriptor(s,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?s.props.ref:s.props.ref||s.ref)}function Cr(s){const r=s+"CollectionProvider",[a,o]=gt(r),[l,c]=a(r,{collectionRef:{current:null},itemMap:new Map}),x=w=>{const{scope:S,children:T}=w,F=Ye.useRef(null),U=Ye.useRef(new Map).current;return e.jsx(l,{scope:S,itemMap:U,collectionRef:F,children:T})};x.displayName=r;const h=s+"CollectionSlot",f=ar(h),g=Ye.forwardRef((w,S)=>{const{scope:T,children:F}=w,U=c(h,T),B=Ae(S,U.collectionRef);return e.jsx(f,{ref:B,children:F})});g.displayName=h;const u=s+"CollectionItemSlot",m="data-radix-collection-item",v=ar(u),M=Ye.forwardRef((w,S)=>{const{scope:T,children:F,...U}=w,B=Ye.useRef(null),Ne=Ae(S,B),ue=c(u,T);return Ye.useEffect(()=>(ue.itemMap.set(B,{ref:B,...U}),()=>{ue.itemMap.delete(B)})),e.jsx(v,{[m]:"",ref:Ne,children:F})});M.displayName=u;function C(w){const S=c(s+"CollectionConsumer",w);return Ye.useCallback(()=>{const F=S.collectionRef.current;if(!F)return[];const U=Array.from(F.querySelectorAll(`[${m}]`));return Array.from(S.itemMap.values()).sort((ue,H)=>U.indexOf(ue.ref.current)-U.indexOf(H.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:x,Slot:g,ItemSlot:M},C,o]}var ol=n.createContext(void 0);function pn(s){const r=n.useContext(ol);return s||r||"ltr"}var nn="rovingFocusGroup.onEntryFocus",il={bubbles:!1,cancelable:!0},Xt="RovingFocusGroup",[on,kr,ll]=Cr(Xt),[cl,$s]=gt(Xt,[ll]),[dl,ul]=cl(Xt),Mr=n.forwardRef((s,r)=>e.jsx(on.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(on.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ml,{...s,ref:r})})}));Mr.displayName=Xt;var ml=n.forwardRef((s,r)=>{const{__scopeRovingFocusGroup:a,orientation:o,loop:l=!1,dir:c,currentTabStopId:x,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:f,onEntryFocus:g,preventScrollOnEntryFocus:u=!1,...m}=s,v=n.useRef(null),M=Ae(r,v),C=pn(c),[w,S]=Ps({prop:x,defaultProp:h??null,onChange:f,caller:Xt}),[T,F]=n.useState(!1),U=As(g),B=kr(a),Ne=n.useRef(!1),[ue,H]=n.useState(0);return n.useEffect(()=>{const Z=v.current;if(Z)return Z.addEventListener(nn,U),()=>Z.removeEventListener(nn,U)},[U]),e.jsx(dl,{scope:a,orientation:o,dir:C,loop:l,currentTabStopId:w,onItemFocus:n.useCallback(Z=>S(Z),[S]),onItemShiftTab:n.useCallback(()=>F(!0),[]),onFocusableItemAdd:n.useCallback(()=>H(Z=>Z+1),[]),onFocusableItemRemove:n.useCallback(()=>H(Z=>Z-1),[]),children:e.jsx(ee.div,{tabIndex:T||ue===0?-1:0,"data-orientation":o,...m,ref:M,style:{outline:"none",...s.style},onMouseDown:$(s.onMouseDown,()=>{Ne.current=!0}),onFocus:$(s.onFocus,Z=>{const me=!Ne.current;if(Z.target===Z.currentTarget&&me&&!T){const Re=new CustomEvent(nn,il);if(Z.currentTarget.dispatchEvent(Re),!Re.defaultPrevented){const Te=B().filter(oe=>oe.focusable),Ke=Te.find(oe=>oe.active),Be=Te.find(oe=>oe.id===w),xe=[Ke,Be,...Te].filter(Boolean).map(oe=>oe.ref.current);Dr(xe,u)}}Ne.current=!1}),onBlur:$(s.onBlur,()=>F(!1))})})}),Rr="RovingFocusGroupItem",Er=n.forwardRef((s,r)=>{const{__scopeRovingFocusGroup:a,focusable:o=!0,active:l=!1,tabStopId:c,children:x,...h}=s,f=qt(),g=c||f,u=ul(Rr,a),m=u.currentTabStopId===g,v=kr(a),{onFocusableItemAdd:M,onFocusableItemRemove:C,currentTabStopId:w}=u;return n.useEffect(()=>{if(o)return M(),()=>C()},[o,M,C]),e.jsx(on.ItemSlot,{scope:a,id:g,focusable:o,active:l,children:e.jsx(ee.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...h,ref:r,onMouseDown:$(s.onMouseDown,S=>{o?u.onItemFocus(g):S.preventDefault()}),onFocus:$(s.onFocus,()=>u.onItemFocus(g)),onKeyDown:$(s.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){u.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const T=pl(S,u.orientation,u.dir);if(T!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let U=v().filter(B=>B.focusable).map(B=>B.ref.current);if(T==="last")U.reverse();else if(T==="prev"||T==="next"){T==="prev"&&U.reverse();const B=U.indexOf(S.currentTarget);U=u.loop?fl(U,B+1):U.slice(B+1)}setTimeout(()=>Dr(U))}}),children:typeof x=="function"?x({isCurrentTabStop:m,hasTabStop:w!=null}):x})})});Er.displayName=Rr;var xl={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hl(s,r){return r!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function pl(s,r,a){const o=hl(s.key,a);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return xl[o]}function Dr(s,r=!1){const a=document.activeElement;for(const o of s)if(o===a||(o.focus({preventScroll:r}),document.activeElement!==a))return}function fl(s,r){return s.map((a,o)=>s[(r+o)%s.length])}var Pr=Mr,Ir=Er;function gl(s){const r=jl(s),a=n.forwardRef((o,l)=>{const{children:c,...x}=o,h=n.Children.toArray(c),f=h.find(bl);if(f){const g=f.props.children,u=h.map(m=>m===f?n.Children.count(g)>1?n.Children.only(null):n.isValidElement(g)?g.props.children:null:m);return e.jsx(r,{...x,ref:l,children:n.isValidElement(g)?n.cloneElement(g,void 0,u):null})}return e.jsx(r,{...x,ref:l,children:c})});return a.displayName=`${s}.Slot`,a}function jl(s){const r=n.forwardRef((a,o)=>{const{children:l,...c}=a;if(n.isValidElement(l)){const x=Nl(l),h=yl(c,l.props);return l.type!==n.Fragment&&(h.ref=o?Is(o,x):x),n.cloneElement(l,h)}return n.Children.count(l)>1?n.Children.only(null):null});return r.displayName=`${s}.SlotClone`,r}var vl=Symbol("radix.slottable");function bl(s){return n.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===vl}function yl(s,r){const a={...r};for(const o in r){const l=s[o],c=r[o];/^on[A-Z]/.test(o)?l&&c?a[o]=(...h)=>{const f=c(...h);return l(...h),f}:l&&(a[o]=l):o==="style"?a[o]={...l,...c}:o==="className"&&(a[o]=[l,c].filter(Boolean).join(" "))}return{...s,...a}}function Nl(s){let r=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?s.ref:(r=Object.getOwnPropertyDescriptor(s,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?s.props.ref:s.props.ref||s.ref)}var ln=["Enter"," "],wl=["ArrowDown","PageUp","Home"],Ar=["ArrowUp","PageDown","End"],Sl=[...wl,...Ar],_l={ltr:[...ln,"ArrowRight"],rtl:[...ln,"ArrowLeft"]},Cl={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zt="Menu",[Wt,kl,Ml]=Cr(Zt),[Xe,Tr]=gt(Zt,[Ml,hr,$s]),Ls=hr(),$r=$s(),[Rl,Ze]=Xe(Zt),[El,Jt]=Xe(Zt),Lr=s=>{const{__scopeMenu:r,open:a=!1,children:o,dir:l,onOpenChange:c,modal:x=!0}=s,h=Ls(r),[f,g]=n.useState(null),u=n.useRef(!1),m=As(c),v=pn(l);return n.useEffect(()=>{const M=()=>{u.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>u.current=!1;return document.addEventListener("keydown",M,{capture:!0}),()=>{document.removeEventListener("keydown",M,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),e.jsx(zo,{...h,children:e.jsx(Rl,{scope:r,open:a,onOpenChange:m,content:f,onContentChange:g,children:e.jsx(El,{scope:r,onClose:n.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:v,modal:x,children:o})})})};Lr.displayName=Zt;var Dl="MenuAnchor",fn=n.forwardRef((s,r)=>{const{__scopeMenu:a,...o}=s,l=Ls(a);return e.jsx(Go,{...l,...o,ref:r})});fn.displayName=Dl;var gn="MenuPortal",[Pl,Or]=Xe(gn,{forceMount:void 0}),Fr=s=>{const{__scopeMenu:r,forceMount:a,children:o,container:l}=s,c=Ze(gn,r);return e.jsx(Pl,{scope:r,forceMount:a,children:e.jsx(jt,{present:a||c.open,children:e.jsx(Ko,{asChild:!0,container:l,children:o})})})};Fr.displayName=gn;var de="MenuContent",[Il,jn]=Xe(de),Ur=n.forwardRef((s,r)=>{const a=Or(de,s.__scopeMenu),{forceMount:o=a.forceMount,...l}=s,c=Ze(de,s.__scopeMenu),x=Jt(de,s.__scopeMenu);return e.jsx(Wt.Provider,{scope:s.__scopeMenu,children:e.jsx(jt,{present:o||c.open,children:e.jsx(Wt.Slot,{scope:s.__scopeMenu,children:x.modal?e.jsx(Al,{...l,ref:r}):e.jsx(Tl,{...l,ref:r})})})})}),Al=n.forwardRef((s,r)=>{const a=Ze(de,s.__scopeMenu),o=n.useRef(null),l=Ae(r,o);return n.useEffect(()=>{const c=o.current;if(c)return Bo(c)},[]),e.jsx(vn,{...s,ref:l,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:$(s.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),Tl=n.forwardRef((s,r)=>{const a=Ze(de,s.__scopeMenu);return e.jsx(vn,{...s,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),$l=gl("MenuContent.ScrollLock"),vn=n.forwardRef((s,r)=>{const{__scopeMenu:a,loop:o=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:x,disableOutsidePointerEvents:h,onEntryFocus:f,onEscapeKeyDown:g,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:v,onDismiss:M,disableOutsideScroll:C,...w}=s,S=Ze(de,a),T=Jt(de,a),F=Ls(a),U=$r(a),B=kl(a),[Ne,ue]=n.useState(null),H=n.useRef(null),Z=Ae(r,H,S.onContentChange),me=n.useRef(0),Re=n.useRef(""),Te=n.useRef(0),Ke=n.useRef(null),Be=n.useRef("right"),$e=n.useRef(0),xe=C?qo:n.Fragment,oe=C?{as:$l,allowPinchZoom:!0}:void 0,es=y=>{const L=Re.current+y,Y=B().filter(X=>!X.disabled),Ve=document.activeElement,Je=Y.find(X=>X.ref.current===Ve)?.textValue,vt=Y.map(X=>X.textValue),bt=Wl(vt,L,Je),De=Y.find(X=>X.textValue===bt)?.ref.current;(function X(et){Re.current=et,window.clearTimeout(me.current),et!==""&&(me.current=window.setTimeout(()=>X(""),1e3))})(L),De&&setTimeout(()=>De.focus())};n.useEffect(()=>()=>window.clearTimeout(me.current),[]),Ho();const Ee=n.useCallback(y=>Be.current===Ke.current?.side&&Yl(y,Ke.current?.area),[]);return e.jsx(Il,{scope:a,searchRef:Re,onItemEnter:n.useCallback(y=>{Ee(y)&&y.preventDefault()},[Ee]),onItemLeave:n.useCallback(y=>{Ee(y)||(H.current?.focus(),ue(null))},[Ee]),onTriggerLeave:n.useCallback(y=>{Ee(y)&&y.preventDefault()},[Ee]),pointerGraceTimerRef:Te,onPointerGraceIntentChange:n.useCallback(y=>{Ke.current=y},[]),children:e.jsx(xe,{...oe,children:e.jsx(Wo,{asChild:!0,trapped:l,onMountAutoFocus:$(c,y=>{y.preventDefault(),H.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:x,children:e.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:g,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:v,onDismiss:M,children:e.jsx(Pr,{asChild:!0,...U,dir:T.dir,orientation:"vertical",loop:o,currentTabStopId:Ne,onCurrentTabStopIdChange:ue,onEntryFocus:$(f,y=>{T.isUsingKeyboardRef.current||y.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Yo,{role:"menu","aria-orientation":"vertical","data-state":sa(S.open),"data-radix-menu-content":"",dir:T.dir,...F,...w,ref:Z,style:{outline:"none",...w.style},onKeyDown:$(w.onKeyDown,y=>{const Y=y.target.closest("[data-radix-menu-content]")===y.currentTarget,Ve=y.ctrlKey||y.altKey||y.metaKey,Je=y.key.length===1;Y&&(y.key==="Tab"&&y.preventDefault(),!Ve&&Je&&es(y.key));const vt=H.current;if(y.target!==vt||!Sl.includes(y.key))return;y.preventDefault();const De=B().filter(X=>!X.disabled).map(X=>X.ref.current);Ar.includes(y.key)&&De.reverse(),Hl(De)}),onBlur:$(s.onBlur,y=>{y.currentTarget.contains(y.target)||(window.clearTimeout(me.current),Re.current="")}),onPointerMove:$(s.onPointerMove,Qt(y=>{const L=y.target,Y=$e.current!==y.clientX;if(y.currentTarget.contains(L)&&Y){const Ve=y.clientX>$e.current?"right":"left";Be.current=Ve,$e.current=y.clientX}}))})})})})})})});Ur.displayName=de;var Ll="MenuGroup",bn=n.forwardRef((s,r)=>{const{__scopeMenu:a,...o}=s;return e.jsx(ee.div,{role:"group",...o,ref:r})});bn.displayName=Ll;var Ol="MenuLabel",zr=n.forwardRef((s,r)=>{const{__scopeMenu:a,...o}=s;return e.jsx(ee.div,{...o,ref:r})});zr.displayName=Ol;var Ms="MenuItem",or="menu.itemSelect",Os=n.forwardRef((s,r)=>{const{disabled:a=!1,onSelect:o,...l}=s,c=n.useRef(null),x=Jt(Ms,s.__scopeMenu),h=jn(Ms,s.__scopeMenu),f=Ae(r,c),g=n.useRef(!1),u=()=>{const m=c.current;if(!a&&m){const v=new CustomEvent(or,{bubbles:!0,cancelable:!0});m.addEventListener(or,M=>o?.(M),{once:!0}),Vo(m,v),v.defaultPrevented?g.current=!1:x.onClose()}};return e.jsx(Gr,{...l,ref:f,disabled:a,onClick:$(s.onClick,u),onPointerDown:m=>{s.onPointerDown?.(m),g.current=!0},onPointerUp:$(s.onPointerUp,m=>{g.current||m.currentTarget?.click()}),onKeyDown:$(s.onKeyDown,m=>{const v=h.searchRef.current!=="";a||v&&m.key===" "||ln.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Os.displayName=Ms;var Gr=n.forwardRef((s,r)=>{const{__scopeMenu:a,disabled:o=!1,textValue:l,...c}=s,x=jn(Ms,a),h=$r(a),f=n.useRef(null),g=Ae(r,f),[u,m]=n.useState(!1),[v,M]=n.useState("");return n.useEffect(()=>{const C=f.current;C&&M((C.textContent??"").trim())},[c.children]),e.jsx(Wt.ItemSlot,{scope:a,disabled:o,textValue:l??v,children:e.jsx(Ir,{asChild:!0,...h,focusable:!o,children:e.jsx(ee.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:g,onPointerMove:$(s.onPointerMove,Qt(C=>{o?x.onItemLeave(C):(x.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$(s.onPointerLeave,Qt(C=>x.onItemLeave(C))),onFocus:$(s.onFocus,()=>m(!0)),onBlur:$(s.onBlur,()=>m(!1))})})})}),Fl="MenuCheckboxItem",Kr=n.forwardRef((s,r)=>{const{checked:a=!1,onCheckedChange:o,...l}=s;return e.jsx(Wr,{scope:s.__scopeMenu,checked:a,children:e.jsx(Os,{role:"menuitemcheckbox","aria-checked":Rs(a)?"mixed":a,...l,ref:r,"data-state":Nn(a),onSelect:$(l.onSelect,()=>o?.(Rs(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Kr.displayName=Fl;var Br="MenuRadioGroup",[Ul,zl]=Xe(Br,{value:void 0,onValueChange:()=>{}}),Vr=n.forwardRef((s,r)=>{const{value:a,onValueChange:o,...l}=s,c=As(o);return e.jsx(Ul,{scope:s.__scopeMenu,value:a,onValueChange:c,children:e.jsx(bn,{...l,ref:r})})});Vr.displayName=Br;var Hr="MenuRadioItem",qr=n.forwardRef((s,r)=>{const{value:a,...o}=s,l=zl(Hr,s.__scopeMenu),c=a===l.value;return e.jsx(Wr,{scope:s.__scopeMenu,checked:c,children:e.jsx(Os,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":Nn(c),onSelect:$(o.onSelect,()=>l.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});qr.displayName=Hr;var yn="MenuItemIndicator",[Wr,Gl]=Xe(yn,{checked:!1}),Qr=n.forwardRef((s,r)=>{const{__scopeMenu:a,forceMount:o,...l}=s,c=Gl(yn,a);return e.jsx(jt,{present:o||Rs(c.checked)||c.checked===!0,children:e.jsx(ee.span,{...l,ref:r,"data-state":Nn(c.checked)})})});Qr.displayName=yn;var Kl="MenuSeparator",Yr=n.forwardRef((s,r)=>{const{__scopeMenu:a,...o}=s;return e.jsx(ee.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});Yr.displayName=Kl;var Bl="MenuArrow",Xr=n.forwardRef((s,r)=>{const{__scopeMenu:a,...o}=s,l=Ls(a);return e.jsx(Xo,{...l,...o,ref:r})});Xr.displayName=Bl;var Vl="MenuSub",[ld,Zr]=Xe(Vl),Vt="MenuSubTrigger",Jr=n.forwardRef((s,r)=>{const a=Ze(Vt,s.__scopeMenu),o=Jt(Vt,s.__scopeMenu),l=Zr(Vt,s.__scopeMenu),c=jn(Vt,s.__scopeMenu),x=n.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:f}=c,g={__scopeMenu:s.__scopeMenu},u=n.useCallback(()=>{x.current&&window.clearTimeout(x.current),x.current=null},[]);return n.useEffect(()=>u,[u]),n.useEffect(()=>{const m=h.current;return()=>{window.clearTimeout(m),f(null)}},[h,f]),e.jsx(fn,{asChild:!0,...g,children:e.jsx(Gr,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":l.contentId,"data-state":sa(a.open),...s,ref:Is(r,l.onTriggerChange),onClick:m=>{s.onClick?.(m),!(s.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:$(s.onPointerMove,Qt(m=>{c.onItemEnter(m),!m.defaultPrevented&&!s.disabled&&!a.open&&!x.current&&(c.onPointerGraceIntentChange(null),x.current=window.setTimeout(()=>{a.onOpenChange(!0),u()},100))})),onPointerLeave:$(s.onPointerLeave,Qt(m=>{u();const v=a.content?.getBoundingClientRect();if(v){const M=a.content?.dataset.side,C=M==="right",w=C?-5:5,S=v[C?"left":"right"],T=v[C?"right":"left"];c.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:S,y:v.top},{x:T,y:v.top},{x:T,y:v.bottom},{x:S,y:v.bottom}],side:M}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(m),m.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:$(s.onKeyDown,m=>{const v=c.searchRef.current!=="";s.disabled||v&&m.key===" "||_l[o.dir].includes(m.key)&&(a.onOpenChange(!0),a.content?.focus(),m.preventDefault())})})})});Jr.displayName=Vt;var ea="MenuSubContent",ta=n.forwardRef((s,r)=>{const a=Or(de,s.__scopeMenu),{forceMount:o=a.forceMount,...l}=s,c=Ze(de,s.__scopeMenu),x=Jt(de,s.__scopeMenu),h=Zr(ea,s.__scopeMenu),f=n.useRef(null),g=Ae(r,f);return e.jsx(Wt.Provider,{scope:s.__scopeMenu,children:e.jsx(jt,{present:o||c.open,children:e.jsx(Wt.Slot,{scope:s.__scopeMenu,children:e.jsx(vn,{id:h.contentId,"aria-labelledby":h.triggerId,...l,ref:g,align:"start",side:x.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{x.isUsingKeyboardRef.current&&f.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:$(s.onFocusOutside,u=>{u.target!==h.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:$(s.onEscapeKeyDown,u=>{x.onClose(),u.preventDefault()}),onKeyDown:$(s.onKeyDown,u=>{const m=u.currentTarget.contains(u.target),v=Cl[x.dir].includes(u.key);m&&v&&(c.onOpenChange(!1),h.trigger?.focus(),u.preventDefault())})})})})})});ta.displayName=ea;function sa(s){return s?"open":"closed"}function Rs(s){return s==="indeterminate"}function Nn(s){return Rs(s)?"indeterminate":s?"checked":"unchecked"}function Hl(s){const r=document.activeElement;for(const a of s)if(a===r||(a.focus(),document.activeElement!==r))return}function ql(s,r){return s.map((a,o)=>s[(r+o)%s.length])}function Wl(s,r,a){const l=r.length>1&&Array.from(r).every(g=>g===r[0])?r[0]:r,c=a?s.indexOf(a):-1;let x=ql(s,Math.max(c,0));l.length===1&&(x=x.filter(g=>g!==a));const f=x.find(g=>g.toLowerCase().startsWith(l.toLowerCase()));return f!==a?f:void 0}function Ql(s,r){const{x:a,y:o}=s;let l=!1;for(let c=0,x=r.length-1;c<r.length;x=c++){const h=r[c],f=r[x],g=h.x,u=h.y,m=f.x,v=f.y;u>o!=v>o&&a<(m-g)*(o-u)/(v-u)+g&&(l=!l)}return l}function Yl(s,r){if(!r)return!1;const a={x:s.clientX,y:s.clientY};return Ql(a,r)}function Qt(s){return r=>r.pointerType==="mouse"?s(r):void 0}var Xl=Lr,Zl=fn,Jl=Fr,ec=Ur,tc=bn,sc=zr,nc=Os,rc=Kr,ac=Vr,oc=qr,ic=Qr,lc=Yr,cc=Xr,dc=Jr,uc=ta,Fs="DropdownMenu",[mc]=gt(Fs,[Tr]),te=Tr(),[xc,na]=mc(Fs),ra=s=>{const{__scopeDropdownMenu:r,children:a,dir:o,open:l,defaultOpen:c,onOpenChange:x,modal:h=!0}=s,f=te(r),g=n.useRef(null),[u,m]=Ps({prop:l,defaultProp:c??!1,onChange:x,caller:Fs});return e.jsx(xc,{scope:r,triggerId:qt(),triggerRef:g,contentId:qt(),open:u,onOpenChange:m,onOpenToggle:n.useCallback(()=>m(v=>!v),[m]),modal:h,children:e.jsx(Xl,{...f,open:u,onOpenChange:m,dir:o,modal:h,children:a})})};ra.displayName=Fs;var aa="DropdownMenuTrigger",oa=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,disabled:o=!1,...l}=s,c=na(aa,a),x=te(a);return e.jsx(Zl,{asChild:!0,...x,children:e.jsx(ee.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...l,ref:Is(r,c.triggerRef),onPointerDown:$(s.onPointerDown,h=>{!o&&h.button===0&&h.ctrlKey===!1&&(c.onOpenToggle(),c.open||h.preventDefault())}),onKeyDown:$(s.onKeyDown,h=>{o||(["Enter"," "].includes(h.key)&&c.onOpenToggle(),h.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});oa.displayName=aa;var hc="DropdownMenuPortal",ia=s=>{const{__scopeDropdownMenu:r,...a}=s,o=te(r);return e.jsx(Jl,{...o,...a})};ia.displayName=hc;var la="DropdownMenuContent",ca=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=na(la,a),c=te(a),x=n.useRef(!1);return e.jsx(ec,{id:l.contentId,"aria-labelledby":l.triggerId,...c,...o,ref:r,onCloseAutoFocus:$(s.onCloseAutoFocus,h=>{x.current||l.triggerRef.current?.focus(),x.current=!1,h.preventDefault()}),onInteractOutside:$(s.onInteractOutside,h=>{const f=h.detail.originalEvent,g=f.button===0&&f.ctrlKey===!0,u=f.button===2||g;(!l.modal||u)&&(x.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ca.displayName=la;var pc="DropdownMenuGroup",da=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(tc,{...l,...o,ref:r})});da.displayName=pc;var fc="DropdownMenuLabel",ua=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(sc,{...l,...o,ref:r})});ua.displayName=fc;var gc="DropdownMenuItem",ma=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(nc,{...l,...o,ref:r})});ma.displayName=gc;var jc="DropdownMenuCheckboxItem",xa=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(rc,{...l,...o,ref:r})});xa.displayName=jc;var vc="DropdownMenuRadioGroup",bc=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(ac,{...l,...o,ref:r})});bc.displayName=vc;var yc="DropdownMenuRadioItem",ha=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(oc,{...l,...o,ref:r})});ha.displayName=yc;var Nc="DropdownMenuItemIndicator",pa=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(ic,{...l,...o,ref:r})});pa.displayName=Nc;var wc="DropdownMenuSeparator",fa=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(lc,{...l,...o,ref:r})});fa.displayName=wc;var Sc="DropdownMenuArrow",_c=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(cc,{...l,...o,ref:r})});_c.displayName=Sc;var Cc="DropdownMenuSubTrigger",ga=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(dc,{...l,...o,ref:r})});ga.displayName=Cc;var kc="DropdownMenuSubContent",ja=n.forwardRef((s,r)=>{const{__scopeDropdownMenu:a,...o}=s,l=te(a);return e.jsx(uc,{...l,...o,ref:r,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ja.displayName=kc;var Mc=ra,Rc=oa,Ec=ia,va=ca,Dc=da,ba=ua,ya=ma,Na=xa,wa=ha,Sa=pa,_a=fa,Ca=ga,ka=ja;const be=Mc,ye=Rc,ir=Dc,Pc=n.forwardRef(({className:s,inset:r,children:a,...o},l)=>e.jsxs(Ca,{ref:l,className:ae("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",s),...o,children:[a,e.jsx(jr,{className:"ml-auto h-4 w-4"})]}));Pc.displayName=Ca.displayName;const Ic=n.forwardRef(({className:s,...r},a)=>e.jsx(ka,{ref:a,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));Ic.displayName=ka.displayName;const ce=n.forwardRef(({className:s,sideOffset:r=4,...a},o)=>e.jsx(Ec,{children:e.jsx(va,{ref:o,sideOffset:r,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));ce.displayName=va.displayName;const O=n.forwardRef(({className:s,inset:r,...a},o)=>e.jsx(ya,{ref:o,className:ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",s),...a}));O.displayName=ya.displayName;const Ac=n.forwardRef(({className:s,children:r,checked:a,...o},l)=>e.jsxs(Na,{ref:l,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Sa,{children:e.jsx(hi,{className:"h-4 w-4"})})}),r]}));Ac.displayName=Na.displayName;const Tc=n.forwardRef(({className:s,children:r,...a},o)=>e.jsxs(wa,{ref:o,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Sa,{children:e.jsx(vr,{className:"h-2 w-2 fill-current"})})}),r]}));Tc.displayName=wa.displayName;const Ma=n.forwardRef(({className:s,inset:r,...a},o)=>e.jsx(ba,{ref:o,className:ae("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...a}));Ma.displayName=ba.displayName;const Ht=n.forwardRef(({className:s,...r},a)=>e.jsx(_a,{ref:a,className:ae("-mx-1 my-1 h-px bg-muted",s),...r}));Ht.displayName=_a.displayName;function $c({projects:s,onNavigate:r}){const{isMobile:a}=pr();return e.jsxs(un,{className:"group-data-[collapsible=icon]:hidden",children:[e.jsx(mr,{children:"Projects"}),e.jsxs(Yt,{children:[s.map(o=>e.jsxs(pt,{children:[e.jsx(ft,{asChild:!0,children:e.jsxs("a",{href:o.url,onClick:l=>{l.preventDefault(),r?.(o.url)},children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.name})]})}),e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsxs(xr,{showOnHover:!0,children:[e.jsx(ht,{}),e.jsx("span",{className:"sr-only",children:"More"})]})}),e.jsxs(ce,{className:"w-48",side:a?"bottom":"right",align:a?"end":"start",children:[e.jsxs(O,{children:[e.jsx(ki,{className:"text-muted-foreground"}),e.jsx("span",{children:"View Project"})]}),e.jsxs(O,{children:[e.jsx(Gi,{className:"text-muted-foreground"}),e.jsx("span",{children:"Share Project"})]}),e.jsx(Ht,{}),e.jsxs(O,{children:[e.jsx(Hi,{className:"text-muted-foreground"}),e.jsx("span",{children:"Delete Project"})]})]})]})]},o.name)),e.jsx(pt,{children:e.jsxs(ft,{onClick:()=>{r?.("/dashboard-v2?tab=projects")},children:[e.jsx(ht,{}),e.jsx("span",{children:"More"})]})})]})]})}function Lc({items:s,onNavigate:r,...a}){return e.jsx(un,{...a,children:e.jsx(Zo,{children:e.jsx(Yt,{children:s.map(o=>e.jsx(pt,{children:e.jsx(ft,{asChild:!0,size:"sm",children:e.jsxs("a",{href:o.url,onClick:l=>{l.preventDefault(),r?.(o.url)},children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})})}function Oc(s,r=[]){let a=[];function o(c,x){const h=n.createContext(x);h.displayName=c+"Context";const f=a.length;a=[...a,x];const g=m=>{const{scope:v,children:M,...C}=m,w=v?.[s]?.[f]||h,S=n.useMemo(()=>C,Object.values(C));return e.jsx(w.Provider,{value:S,children:M})};g.displayName=c+"Provider";function u(m,v){const M=v?.[s]?.[f]||h,C=n.useContext(M);if(C)return C;if(x!==void 0)return x;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[g,u]}const l=()=>{const c=a.map(x=>n.createContext(x));return function(h){const f=h?.[s]||c;return n.useMemo(()=>({[`__scope${s}`]:{...h,[s]:f}}),[h,f])}};return l.scopeName=s,[o,Fc(l,...r)]}function Fc(...s){const r=s[0];if(s.length===1)return r;const a=()=>{const o=s.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const x=o.reduce((h,{useScope:f,scopeName:g})=>{const m=f(c)[`__scope${g}`];return{...h,...m}},{});return n.useMemo(()=>({[`__scope${r.scopeName}`]:x}),[x])}};return a.scopeName=r.scopeName,a}var Uc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wn=Uc.reduce((s,r)=>{const a=Jo(`Primitive.${r}`),o=n.forwardRef((l,c)=>{const{asChild:x,...h}=l,f=x?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return o.displayName=`Primitive.${r}`,{...s,[r]:o}},{}),rn={exports:{}},an={};var lr;function zc(){if(lr)return an;lr=1;var s=So();function r(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var a=typeof Object.is=="function"?Object.is:r,o=s.useState,l=s.useEffect,c=s.useLayoutEffect,x=s.useDebugValue;function h(m,v){var M=v(),C=o({inst:{value:M,getSnapshot:v}}),w=C[0].inst,S=C[1];return c(function(){w.value=M,w.getSnapshot=v,f(w)&&S({inst:w})},[m,M,v]),l(function(){return f(w)&&S({inst:w}),m(function(){f(w)&&S({inst:w})})},[m]),x(M),M}function f(m){var v=m.getSnapshot;m=m.value;try{var M=v();return!a(m,M)}catch{return!0}}function g(m,v){return v()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return an.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:u,an}var cr;function Gc(){return cr||(cr=1,rn.exports=zc()),rn.exports}var Kc=Gc();function Bc(){return Kc.useSyncExternalStore(Vc,()=>!0,()=>!1)}function Vc(){return()=>{}}var Sn="Avatar",[Hc]=Oc(Sn),[qc,Ra]=Hc(Sn),Ea=n.forwardRef((s,r)=>{const{__scopeAvatar:a,...o}=s,[l,c]=n.useState("idle");return e.jsx(qc,{scope:a,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:e.jsx(wn.span,{...o,ref:r})})});Ea.displayName=Sn;var Da="AvatarImage",Pa=n.forwardRef((s,r)=>{const{__scopeAvatar:a,src:o,onLoadingStatusChange:l=()=>{},...c}=s,x=Ra(Da,a),h=Wc(o,c),f=As(g=>{l(g),x.onImageLoadingStatusChange(g)});return ks(()=>{h!=="idle"&&f(h)},[h,f]),h==="loaded"?e.jsx(wn.img,{...c,ref:r,src:o}):null});Pa.displayName=Da;var Ia="AvatarFallback",Aa=n.forwardRef((s,r)=>{const{__scopeAvatar:a,delayMs:o,...l}=s,c=Ra(Ia,a),[x,h]=n.useState(o===void 0);return n.useEffect(()=>{if(o!==void 0){const f=window.setTimeout(()=>h(!0),o);return()=>window.clearTimeout(f)}},[o]),x&&c.imageLoadingStatus!=="loaded"?e.jsx(wn.span,{...l,ref:r}):null});Aa.displayName=Ia;function dr(s,r){return s?r?(s.src!==r&&(s.src=r),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Wc(s,{referrerPolicy:r,crossOrigin:a}){const o=Bc(),l=n.useRef(null),c=o?(l.current||(l.current=new window.Image),l.current):null,[x,h]=n.useState(()=>dr(c,s));return ks(()=>{h(dr(c,s))},[c,s]),ks(()=>{const f=m=>()=>{h(m)};if(!c)return;const g=f("loaded"),u=f("error");return c.addEventListener("load",g),c.addEventListener("error",u),r&&(c.referrerPolicy=r),typeof a=="string"&&(c.crossOrigin=a),()=>{c.removeEventListener("load",g),c.removeEventListener("error",u)}},[c,a,r]),x}var Ta=Ea,$a=Pa,La=Aa;const Es=n.forwardRef(({className:s,...r},a)=>e.jsx(Ta,{ref:a,className:ae("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r}));Es.displayName=Ta.displayName;const cn=n.forwardRef(({className:s,...r},a)=>e.jsx($a,{ref:a,className:ae("aspect-square h-full w-full",s),...r}));cn.displayName=$a.displayName;const Ds=n.forwardRef(({className:s,...r},a)=>e.jsx(La,{ref:a,className:ae("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r}));Ds.displayName=La.displayName;function Qc({user:s,onNavigate:r,onSignOut:a}){const{isMobile:o}=pr();return e.jsx(Yt,{children:e.jsx(pt,{children:e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsxs(ft,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(Es,{className:"h-8 w-8 rounded-lg",children:[s?.avatar?e.jsx(cn,{src:s.avatar,alt:s?.name||"User"}):null,e.jsx(Ds,{className:"rounded-lg",children:(s?.name||"U").slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-medium",children:s?.name||"Account"}),e.jsx("span",{className:"truncate text-xs",children:s?.email||""})]}),e.jsx(gi,{className:"ml-auto size-4"})]})}),e.jsxs(ce,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:o?"bottom":"right",align:"end",sideOffset:4,children:[e.jsx(Ma,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[e.jsxs(Es,{className:"h-8 w-8 rounded-lg",children:[s?.avatar?e.jsx(cn,{src:s.avatar,alt:s?.name||"User"}):null,e.jsx(Ds,{className:"rounded-lg",children:(s?.name||"U").slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-medium",children:s?.name||"Account"}),e.jsx("span",{className:"truncate text-xs",children:s?.email||""})]})]})}),e.jsx(Ht,{}),e.jsx(ir,{children:e.jsxs(O,{onSelect:l=>{l.preventDefault(),r?.("/subscription")},children:[e.jsx(Bi,{}),"Upgrade to Pro"]})}),e.jsx(Ht,{}),e.jsxs(ir,{children:[e.jsxs(O,{children:[e.jsx(di,{}),"Account"]}),e.jsxs(O,{onSelect:l=>{l.preventDefault(),r?.("/dashboard-v2?tab=billing")},children:[e.jsx(fr,{}),"Billing"]}),e.jsxs(O,{children:[e.jsx(mi,{}),"Notifications"]})]}),e.jsx(Ht,{}),e.jsxs(O,{onSelect:l=>{l.preventDefault(),a?.()},children:[e.jsx(Pi,{}),"Log out"]})]})]})})})}function Yc({navigate:s,user:r,projects:a,onSignOut:o,...l}){const c=n.useMemo(()=>[{title:"Dashboard",url:"/dashboard-v2",icon:Ei,isActive:!0},{title:"Projects",url:"/dashboard-v2?tab=projects",icon:sn},{title:"Exports",url:"/dashboard-v2?tab=exports",icon:Ai},{title:"Billing",url:"/dashboard-v2?tab=billing",icon:fr},{title:"Settings",url:"/dashboard-v2?tab=settings",icon:Ui},{title:"Diagnostics",url:"/dashboard-v2?tab=diagnostics",icon:gr}],[]),x=n.useMemo(()=>[{title:"Support",url:"/help",icon:nr}],[]),h=n.useMemo(()=>{const f=(a||[]).slice(0,6).map(g=>{const u=g?.project_id??g?.id??"";return{name:g?.name??g?.project_name??"Project",url:u?`/dashboard-v2?tab=projects&project=${encodeURIComponent(String(u))}`:"/dashboard-v2?tab=projects",icon:sn}});return f.length?f:[{name:"All projects",url:"/dashboard-v2?tab=projects",icon:sn}]},[a]);return e.jsxs(ei,{variant:"sidebar",...l,children:[e.jsx(ti,{children:e.jsx(Yt,{children:e.jsx(pt,{children:e.jsx(ft,{size:"lg",asChild:!0,children:e.jsxs("a",{href:"/dashboard-v2",onClick:f=>{f.preventDefault(),s?.("/dashboard-v2")},children:[e.jsx("div",{className:"bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:e.jsx(nr,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-medium",children:"ML FORGE"}),e.jsx("span",{className:"truncate text-xs",children:"Workspace"})]})]})})})})}),e.jsxs(si,{children:[e.jsx(el,{items:c,onNavigate:s,activePath:`${window.location.pathname}${window.location.search||""}`}),e.jsx($c,{projects:h,onNavigate:s}),e.jsx(Lc,{items:x,className:"mt-auto",onNavigate:s})]}),e.jsx(ni,{children:e.jsx(Qc,{user:r,onNavigate:s,onSignOut:o})})]})}var Us="Tabs",[Xc]=gt(Us,[$s]),Oa=$s(),[Zc,_n]=Xc(Us),Fa=n.forwardRef((s,r)=>{const{__scopeTabs:a,value:o,onValueChange:l,defaultValue:c,orientation:x="horizontal",dir:h,activationMode:f="automatic",...g}=s,u=pn(h),[m,v]=Ps({prop:o,onChange:l,defaultProp:c??"",caller:Us});return e.jsx(Zc,{scope:a,baseId:qt(),value:m,onValueChange:v,orientation:x,dir:u,activationMode:f,children:e.jsx(ee.div,{dir:u,"data-orientation":x,...g,ref:r})})});Fa.displayName=Us;var Ua="TabsList",za=n.forwardRef((s,r)=>{const{__scopeTabs:a,loop:o=!0,...l}=s,c=_n(Ua,a),x=Oa(a);return e.jsx(Pr,{asChild:!0,...x,orientation:c.orientation,dir:c.dir,loop:o,children:e.jsx(ee.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:r})})});za.displayName=Ua;var Ga="TabsTrigger",Ka=n.forwardRef((s,r)=>{const{__scopeTabs:a,value:o,disabled:l=!1,...c}=s,x=_n(Ga,a),h=Oa(a),f=Ha(x.baseId,o),g=qa(x.baseId,o),u=o===x.value;return e.jsx(Ir,{asChild:!0,...h,focusable:!l,active:u,children:e.jsx(ee.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":g,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:f,...c,ref:r,onMouseDown:$(s.onMouseDown,m=>{!l&&m.button===0&&m.ctrlKey===!1?x.onValueChange(o):m.preventDefault()}),onKeyDown:$(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&x.onValueChange(o)}),onFocus:$(s.onFocus,()=>{const m=x.activationMode!=="manual";!u&&!l&&m&&x.onValueChange(o)})})})});Ka.displayName=Ga;var Ba="TabsContent",Va=n.forwardRef((s,r)=>{const{__scopeTabs:a,value:o,forceMount:l,children:c,...x}=s,h=_n(Ba,a),f=Ha(h.baseId,o),g=qa(h.baseId,o),u=o===h.value,m=n.useRef(u);return n.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(jt,{present:l||u,children:({present:v})=>e.jsx(ee.div,{"data-state":u?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":f,hidden:!v,id:g,tabIndex:0,...x,ref:r,style:{...s.style,animationDuration:m.current?"0s":void 0},children:v&&c})})});Va.displayName=Ba;function Ha(s,r){return`${s}-trigger-${r}`}function qa(s,r){return`${s}-content-${r}`}var Jc=Fa,Wa=za,Qa=Ka,Ya=Va;const ur=Jc,dn=n.forwardRef(({className:s,...r},a)=>e.jsx(Wa,{ref:a,className:ae("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r}));dn.displayName=Wa.displayName;const J=n.forwardRef(({className:s,...r},a)=>e.jsx(Qa,{ref:a,className:ae("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r}));J.displayName=Qa.displayName;const re=n.forwardRef(({className:s,...r},a)=>e.jsx(Ya,{ref:a,className:ae("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));re.displayName=Ya.displayName;function cd({session:s,navigate:r,lockedTab:a=null}){const[o,l]=n.useState("overview"),c=n.useMemo(()=>{try{const i=(typeof document<"u"&&document.cookie||"").match(/(?:^|;\s*)sidebar_state=([^;]+)/);return i?decodeURIComponent(i[1]||"")==="true":!0}catch{return!0}},[]),x=s?.user?.user_metadata||{},h=[x.first_name,x.last_name].filter(Boolean).join(" ")||s?.user?.email||"Account",f=n.useMemo(()=>((h||"U").split(" ").filter(Boolean).slice(0,2).map(p=>p[0]).join("")||"U").toUpperCase(),[h]),g=n.useCallback(async()=>{try{await Ge.auth.signOut()}finally{r?.("/")}},[r]),u=s?.user?.id||null,m=n.useCallback(t=>{try{return t==null?"":JSON.stringify(t,null,2)}catch{return String(t)}},[]),v=n.useCallback(t=>{if(!t||typeof t!="object"||Array.isArray(t))return[];try{return Object.entries(t)}catch{return[]}},[]);n.useCallback((t,i="overview")=>{const d=t?encodeURIComponent(String(t)):"",p=new URLSearchParams;p.set("tab",String(i||"overview")),d&&p.set("project",d);const j=`/dashboard-v2?${p.toString()}`;r?.(j)},[a,r]);const[M,C]=n.useState(null),[w,S]=n.useState(null),[T,F]=n.useState(null),[U,B]=n.useState(null),[Ne,ue]=n.useState("overview"),[H,Z]=n.useState(null),[me,Re]=n.useState([]),[Te,Ke]=n.useState([]),[Be,$e]=n.useState([]),[xe,oe]=n.useState([]),[es,Ee]=n.useState(!1),[y,L]=n.useState({projects:!1,exports:!1,models:!1,trainingRuns:!1,timeline:!1,usage:!1,sync:!1,license:!1,subscription:!1,trial:!1,subscriptionUsage:!1,diagnostics:!1,billing:!1}),[Y,Ve]=n.useState([]),[Je,vt]=n.useState([]),[bt,De]=n.useState([]),[X,et]=n.useState([]),[yt,Xa]=n.useState([]),[Pe,Cn]=n.useState(null),[N,zs]=n.useState(""),[he,ts]=n.useState(""),[z,kn]=n.useState({lastSyncAt:null,lastSyncEventAt:null,lastSyncEventStatus:null,lastSyncError:null,lastIdeVersion:null,lastIdePlatform:null}),[Za,tt]=n.useState(!1),[Ja,Nt]=n.useState(!1),[eo,ss]=n.useState(!1),[to,st]=n.useState(!1),[so,ns]=n.useState(!1),[we,rs]=n.useState(""),[pe,He]=n.useState("all"),[se,nt]=n.useState("start_time"),[Se,rt]=n.useState("desc"),[wt,as]=n.useState(1),[Le,Mn]=n.useState(25),[_e,os]=n.useState(""),[fe,St]=n.useState("trained_at"),[Ce,_t]=n.useState("desc"),[Ct,is]=n.useState(1),[Oe,Rn]=n.useState(25),[ke,ls]=n.useState(""),[ge,qe]=n.useState("all"),[je,kt]=n.useState("exported_at"),[Me,Mt]=n.useState("desc"),[Rt,cs]=n.useState(1),[Fe,En]=n.useState(25),Dn=n.useRef(null),Pn=n.useRef(null),In=n.useRef(null),[at,ot]=n.useState(()=>new Set),[it,lt]=n.useState(()=>new Set),[ct,dt]=n.useState(()=>new Set),[An,Tn]=n.useState([]),[ds,$n]=n.useState(""),[us,Ln]=n.useState(""),[ms,On]=n.useState(""),[xs,Fn]=n.useState(""),ut=n.useCallback(t=>t?.project_id??t?.id??"",[]),Gs=n.useCallback(t=>t?.name??t?.project_name??t?.title??"Project",[]),We=n.useMemo(()=>N&&Y.find(t=>String(ut(t))===String(N))||null,[ut,Y,N]),_=n.useMemo(()=>he&&(X||[]).find(i=>String(i?.project_id||"")===String(N||"")&&String(i?.id||i?.run_id||"")===String(he))||null,[N,he,X]),Ks=n.useCallback(t=>{const i=new URLSearchParams(t||""),d=i.get("tab")||"overview",j=["overview","projects","activity","runs","models","exports","billing","settings","diagnostics"].includes(d)?d:"overview",A=i.get("project")||"",k=i.get("run")||"",W=i.get("runsQ")||"",V=i.get("runsStatus")||"all",le=["all","running","completed","failed"].includes(V)?V:"all",Qe=i.get("runsSortKey")||"start_time",Qs=["start_time","gpu_hours_used","status"].includes(Qe)?Qe:"start_time",co=(i.get("runsSortDir")||"desc")==="asc"?"asc":"desc",Ys=Number(i.get("runsPage")||1),uo=Number.isFinite(Ys)&&Ys>0?Math.floor(Ys):1,Wn=Number(i.get("runsPageSize")||25),mo=[10,25,50,100].includes(Wn)?Wn:25,xo=i.get("modelsQ")||"",Qn=i.get("modelsSortKey")||"trained_at",ho=["trained_at","updated_at"].includes(Qn)?Qn:"trained_at",po=(i.get("modelsSortDir")||"desc")==="asc"?"asc":"desc",Xs=Number(i.get("modelsPage")||1),fo=Number.isFinite(Xs)&&Xs>0?Math.floor(Xs):1,Yn=Number(i.get("modelsPageSize")||25),go=[10,25,50,100].includes(Yn)?Yn:25,jo=i.get("exportsQ")||"",Xn=i.get("exportsFormat")||"all",vo=["all","onnx","tensorrt","torchscript"].includes(Xn)?Xn:"all",Zn=i.get("exportsSortKey")||"exported_at",bo=["exported_at","created_at"].includes(Zn)?Zn:"exported_at",yo=(i.get("exportsSortDir")||"desc")==="asc"?"asc":"desc",Zs=Number(i.get("exportsPage")||1),No=Number.isFinite(Zs)&&Zs>0?Math.floor(Zs):1,Jn=Number(i.get("exportsPageSize")||25),wo=[10,25,50,100].includes(Jn)?Jn:25;a||l(j),zs(A),ts(k),rs(W),He(le),nt(Qs),rt(co),as(uo),Mn(mo),os(xo),St(ho),_t(po),is(fo),Rn(go),ls(jo),qe(vo),kt(bo),Mt(yo),cs(No),En(wo)},[a]),Bs=n.useCallback((t,i,d)=>`${d?.[t]||t} ${i==="asc"?"":""}`,[]),Vs=n.useCallback((t,i)=>{const d=W=>{const V=String(W??"");return/[\n\r\",]/.test(V)?`"${V.replaceAll('"','""')}"`:V},p=(i||[]).map(W=>W.map(d).join(",")).join(`
`),j=new Blob([p],{type:"text/csv;charset=utf-8"}),A=URL.createObjectURL(j),k=document.createElement("a");k.href=A,k.download=t,document.body.appendChild(k),k.click(),k.remove(),setTimeout(()=>URL.revokeObjectURL(A),500)},[]);n.useEffect(()=>{if(a){l(String(a||"overview"));return}Ks(window.location.search||"");const t=()=>{Ks(window.location.search||"")};return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)},[Ks,a]);const Un=n.useRef(null);n.useEffect(()=>{if(a)return;const t=new URLSearchParams(window.location.search||""),i=t.get("tab")||"overview",d=String(o||"overview");if(i!==d&&Un.current!==d){t.set("tab",d);const p=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",p),Un.current=d}},[o]),n.useEffect(()=>{if(a)return;const t=new URLSearchParams(window.location.search||"");t.set("tab",String(o||"overview")),N?t.set("project",String(N)):t.delete("project"),he?t.set("run",String(he)):t.delete("run"),we.trim()?t.set("runsQ",we.trim()):t.delete("runsQ"),pe!=="all"?t.set("runsStatus",String(pe)):t.delete("runsStatus"),se!=="start_time"?t.set("runsSortKey",String(se)):t.delete("runsSortKey"),Se!=="desc"?t.set("runsSortDir",String(Se)):t.delete("runsSortDir"),wt!==1?t.set("runsPage",String(wt)):t.delete("runsPage"),Le!==25?t.set("runsPageSize",String(Le)):t.delete("runsPageSize"),_e.trim()?t.set("modelsQ",_e.trim()):t.delete("modelsQ"),fe!=="trained_at"?t.set("modelsSortKey",String(fe)):t.delete("modelsSortKey"),Ce!=="desc"?t.set("modelsSortDir",String(Ce)):t.delete("modelsSortDir"),Ct!==1?t.set("modelsPage",String(Ct)):t.delete("modelsPage"),Oe!==25?t.set("modelsPageSize",String(Oe)):t.delete("modelsPageSize"),ke.trim()?t.set("exportsQ",ke.trim()):t.delete("exportsQ"),ge!=="all"?t.set("exportsFormat",String(ge)):t.delete("exportsFormat"),je!=="exported_at"?t.set("exportsSortKey",String(je)):t.delete("exportsSortKey"),Me!=="desc"?t.set("exportsSortDir",String(Me)):t.delete("exportsSortDir"),Rt!==1?t.set("exportsPage",String(Rt)):t.delete("exportsPage"),Fe!==25?t.set("exportsPageSize",String(Fe)):t.delete("exportsPageSize");const i=`${window.location.pathname}?${t.toString()}`,d=`${window.location.pathname}${window.location.search||""}`;i!==d&&window.history.replaceState({},"",i)},[o,N,we,pe,se,Se,wt,Le,_e,fe,Ce,Ct,Oe,ke,ge,je,Me,Rt,Fe]),n.useEffect(()=>{as(1),ot(new Set),ts("")},[we,pe,se,Se,N]),n.useEffect(()=>{is(1),lt(new Set)},[_e,fe,Ce,N]),n.useEffect(()=>{cs(1),dt(new Set)},[ke,ge,je,Me,N]);const Q=n.useCallback(t=>{if(!t)return"Never";try{return new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},[]),zn=n.useCallback(t=>{const i=String(t||"").toLowerCase();return i.includes("active")||i.includes("healthy")||i.includes("success")?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20":i.includes("running")||i.includes("processing")?"bg-blue-500/10 text-blue-600 border-blue-500/20":i.includes("failed")||i.includes("error")||i.includes("degraded")?"bg-red-500/10 text-red-600 border-red-500/20":i.includes("pending")||i.includes("queued")?"bg-amber-500/10 text-amber-600 border-amber-500/20":"bg-muted text-foreground/70 border-border"},[]),Gn=n.useCallback(({value:t})=>e.jsx("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium "+zn(t),children:String(t||"Unknown")}),[zn]),Ue=n.useCallback(({children:t,onClear:i,onClick:d})=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border bg-background px-2.5 py-1 text-[11px] text-foreground/80",children:[d?e.jsx("button",{type:"button",className:"truncate text-left hover:text-foreground",onClick:d,children:t}):e.jsx("span",{className:"truncate",children:t}),i&&e.jsx("button",{type:"button",className:"rounded-full border px-1 text-[10px] leading-none text-muted-foreground hover:text-foreground",onClick:i,children:""})]}),[]),ie=n.useMemo(()=>N?(Je||[]).filter(t=>String(t?.project_id||"")===String(N)):[],[Je,N]),Et=n.useMemo(()=>N?(bt||[]).filter(t=>String(t?.project_id||"")===String(N)):[],[bt,N]),ne=n.useMemo(()=>N?(X||[]).filter(t=>String(t?.project_id||"")===String(N)):[],[X,N]),ze=n.useMemo(()=>{const t=(ne||[]).reduce((d,p)=>d+Number(p?.gpu_hours_used||0),0),i=ne?.[0]||null;return{totalGpuHours:Number(t.toFixed(2)),lastGpuType:i?.gpu_type||null,lastGpuCount:i?.gpu_count??null}},[ne]),mt=Number(We?.dataset_count??We?.datasets_count??0),hs=n.useMemo(()=>({projects:Y.length,datasets:mt,exports:ie.length,gpuHours:Number(ze.totalGpuHours.toFixed(1))}),[mt,ie.length,ze.totalGpuHours,Y.length]),Dt=n.useMemo(()=>{const t=(Y||[]).length>0,i=!!(z?.lastSyncAt||z?.lastSyncEventAt),d=!!N,p=(ne||[]).length>0,j=(ie||[]).length>0;return{hasProjects:t,hasSynced:i,hasSelectedProject:d,hasRuns:p,hasExports:j,steps:[{key:"download",title:"Install ML Forge IDE",detail:"Install the IDE to sync metadata to this dashboard.",done:i,cta:{label:"Download",onClick:()=>r?.("/download")}},{key:"sync",title:"Sign in and sync",detail:"Sign in in the IDE and run a sync to populate your workspace here.",done:i,cta:{label:"Diagnostics",onClick:()=>r?.("/dashboard-v2?tab=diagnostics")}},{key:"project",title:"Create a project (in the IDE)",detail:"Projects created in the IDE appear here after sync.",done:t,cta:{label:"Projects",onClick:()=>r?.("/dashboard-v2?tab=projects")}},{key:"select",title:"Select your project",detail:"Pick the project you want to work on.",done:d,cta:{label:"Select",onClick:()=>r?.("/dashboard-v2?tab=projects")}},{key:"run",title:"Start a training run (in the IDE)",detail:"Runs are executed in the IDE and appear here automatically.",done:p,cta:{label:"Runs",onClick:()=>r?.("/dashboard-v2?tab=runs")}},{key:"export",title:"Create an export (in the IDE)",detail:"Exports generated in the IDE appear here after sync.",done:j,cta:{label:"Exports",onClick:()=>r?.("/dashboard-v2?tab=exports")}}]}},[r,ie,ne,Y,N,z?.lastSyncAt,z?.lastSyncEventAt]),no=n.useMemo(()=>!Dt.hasSynced||!Dt.hasProjects?!["billing","settings","diagnostics"].includes(String(o||"overview")):!1,[o,Dt.hasProjects,Dt.hasSynced]),ve=n.useMemo(()=>{const t=z.lastSyncError||z.lastSyncEventStatus==="failed"?"Degraded":z.lastSyncAt?"Healthy":"Unknown",i=z.lastSyncAt?Q(z.lastSyncAt):"Never",d=z.lastSyncEventAt?`${z.lastSyncEventStatus||"event"}  ${Q(z.lastSyncEventAt)}`:"No events";return{status:t,lastSync:i,lastEvent:d}},[Q,z]),Kn=n.useMemo(()=>{if(!N)return{title:"Select a project to begin",items:[{title:"Pick a project",detail:"All metrics and timelines are scoped to a single project."}]};const t=mt,i=Number(ne?.length||0),d=Number(ie?.length||0),p=[];return t===0&&p.push({title:"Create or sync a dataset",detail:"Create your first dataset in the IDE. Once the IDE syncs, the dataset count will appear here."}),t>0&&i===0&&p.push({title:"Run your first training",detail:"Start a training run in the IDE. This dashboard will show run status + final metrics once synced."}),i>0&&d===0&&p.push({title:"Export a model artifact",detail:"Export ONNX/TensorRT/etc. from the IDE. This dashboard stores metadata only (format + timestamp)."}),z.lastSyncAt==null&&p.push({title:"Check IDE sync health",detail:"No sync timestamp reported yet. Make sure the IDE is authenticated and online for metadata sync."}),p.length===0&&p.push({title:"Review latest outputs",detail:"You have runs and exports. Use the tables below to audit provenance, timestamps, and formats."}),{title:"Recommended next steps",items:p}},[mt,ie?.length,ne?.length,N,z.lastSyncAt]),q=n.useMemo(()=>{const t=Pe?.usage||null,i=Pe?.limits||null,d=Number(t?.projects_count??Y.length??0),p=i?.max_projects,j=Number(t?.exports_count??0),A=i?.max_exports_per_month,k=Number(t?.training_runs_count??0),W=i?.max_training_runs_per_month,V=Number(t?.gpu_hours_used??0),le=i?.max_gpu_hours_per_month,Qe=(Qs,Ss)=>Ss==null?null:Number(Ss)===-1?0:Po(Qs,Ss);return{tier:Pe?.tier||"free",projects:{used:d,limit:p,pct:Qe(d,p)},exports:{used:j,limit:A,pct:Qe(j,A)},runs:{used:k,limit:W,pct:Qe(k,W)},gpu:{used:V,limit:le,pct:Qe(V,le)}}},[Y.length,Pe]);n.useMemo(()=>M?M.is_active?M.expires_at&&new Date(M.expires_at).getTime()<Date.now()?"Expired":"Active":"Inactive":"Unknown",[M]),n.useMemo(()=>{const t=Pe?.limits||null,i=Pe?.usage||null,p=[{key:"projects",label:"Projects",current:Number(i?.projects_count??0),limit:t?.max_projects},{key:"exports",label:"Exports (monthly)",current:Number(i?.exports_count??0),limit:t?.max_exports_per_month},{key:"runs",label:"Training runs (monthly)",current:Number(i?.training_runs_count??0),limit:t?.max_training_runs_per_month},{key:"gpu",label:"GPU hours (monthly)",current:Number(i?.gpu_hours_used??0),limit:t?.max_gpu_hours_per_month,unit:"h"}].filter(k=>k.limit!=null&&k.limit!==-1).map(k=>{const W=Ro(k.current,k.limit),V=Eo(k.current,k.limit);return{...k,isSoftLimit:W,isHardLimit:V}}).filter(k=>k.isSoftLimit||k.isHardLimit),j=p.find(k=>k.isHardLimit),A=p.find(k=>k.isSoftLimit);return{warnings:p,hard:j||null,soft:A||null}},[Pe]);const Hs=n.useMemo(()=>{const t=(yt||[]).filter(d=>{if(!N)return!1;const p=d?.project_id||d?.event_data?.project_id;return p?String(p)===String(N):!0});return(t.length?t:yt||[]).slice(0,10).map((d,p)=>{const j=d?.event_type||d?.type||"activity",A=d?.created_at||d?.timestamp||null,k=d?.title||j,W=d?.detail||d?.message||d?.metadata?.message||d?.error||"",V=j.toLowerCase().includes("export")?Kt:j.toLowerCase().includes("sync")?ri:gr;return{key:String(d?.id||`${j}-${p}`),title:k,detail:W,time:A?Q(A):"",icon:V}})},[yt,Q,N]),ps=n.useCallback(async()=>{if(!u)return;L(d=>({...d,projects:!0}));const i=(await _o.getProjects(u))?.data||[];if(Ve(i),!N){const d=i?.[0]?ut(i[0]):"";d&&zs(String(d))}L(d=>({...d,projects:!1}))},[ut,N,u]),qs=n.useCallback(async()=>{if(!u)return;L(i=>({...i,exports:!0}));const t=await Co.getExports(u);vt(t?.data||[]),L(i=>({...i,exports:!1}))},[u]),Bn=n.useCallback(t=>{if(!t)return[];const i=[],d=new Date;for(let p=29;p>=0;p--){const j=new Date(d);j.setDate(j.getDate()-p);const A=j.toISOString().split("T")[0],W=(t.gpuUsage?.filter(V=>new Date(V.usage_start).toISOString().split("T")[0]===A)||[]).reduce((V,le)=>V+parseFloat(le.hours_used||0),0);i.push({date:A,label:j.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:W})}return i},[]),Ie=n.useCallback(async()=>{if(u){L(t=>({...t,billing:!0}));try{const[t,i,d,p,j]=await Promise.all([Io().catch(()=>null),sr().catch(()=>null),Ao(20).catch(()=>null),To().catch(()=>null),er().catch(()=>null)]);Z(t?.data||null),S(i?.data||null),Re(d?.data||[]),Ke(p?.data||[]),F(j?.data||null);const A=t?.data?.subscription_id;if(A){Ee(!0);try{const k=await tr(A);oe(Bn(k?.data))}catch{oe([])}try{const k=await Ge.from("subscription_change_history").select("*").eq("subscription_id",A).order("created_at",{ascending:!1}).limit(50);$e(k?.data||[])}catch{$e([])}Ee(!1)}else oe([]),$e([])}finally{L(t=>({...t,billing:!1}))}}},[Bn,u]),Ws=n.useCallback(t=>{if(!t)return"Never";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}},[]),ro=n.useCallback(t=>{if(!t)return"Never";try{return new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},[]),ao=n.useCallback(async()=>{if(!H?.subscription_id||!confirm("Are you sure you want to cancel your subscription? You will continue to have access until the end of your billing period."))return;(await $o(H.subscription_id))?.success&&await Ie()},[H?.subscription_id,Ie]),oo=n.useCallback(async()=>{if(!H?.subscription_id)return;(await Lo(H.subscription_id))?.success&&await Ie()},[H?.subscription_id,Ie]),Vn=n.useCallback(async()=>{const t={generated_at:new Date().toISOString(),user_id:u||null,email:s?.user?.email||null,selected_project_id:N||null,selected_project_name:We?Gs(We):null,sync:{status:ve?.status||null,last_sync_at:z?.lastSyncAt||null,last_sync_event_at:z?.lastSyncEventAt||null,last_sync_event_status:z?.lastSyncEventStatus||null,last_sync_error:z?.lastSyncError||null,ide_version:z?.lastIdeVersion||null,ide_platform:z?.lastIdePlatform||null},subscription:{plan_type:w?.plan_type||null,plan_name:w?.plan_name||w?.plan||null,status:w?.status||null,trial_active:!!T?.is_active,trial_ends_at:T?.ends_at||null},usage_with_limits:Pe||null,recent_activity:(yt||[]).slice(0,20)},i=JSON.stringify(t,null,2);try{await navigator?.clipboard?.writeText(i),alert("Diagnostics bundle copied to clipboard")}catch{try{window.prompt("Copy diagnostics bundle:",i)}catch{alert("Unable to copy diagnostics bundle")}}},[T?.ends_at,T?.is_active,yt,We,N,s?.user?.email,w,ve?.status,z,Pe,u]),io=n.useCallback(async t=>{const i=(me||[]).find(p=>p.billing_id===t),d=i?.invoice_pdf_url||i?.hosted_invoice_url;if(d){window.open(d,"_blank");return}},[me]),fs=n.useCallback(async()=>{L(t=>({...t,usage:!0}));try{const t=await Do();Cn(t||null)}catch{Cn(null)}L(t=>({...t,usage:!1}))},[]),gs=n.useCallback(async()=>{if(!u)return;L(i=>({...i,timeline:!0}));const t=await ko(u,50);Xa(t?.data?.activities||t?.activities||[]),L(i=>({...i,timeline:!1}))},[u]),Pt=n.useCallback(async()=>{if(!u||!N){De([]);return}L(t=>({...t,models:!0}));try{const{data:t,error:i}=await Ge.from("models").select("*").eq("user_id",u).eq("project_id",N).order("trained_at",{ascending:!1}).limit(50);if(i)throw i;De(t||[])}catch{De([])}L(t=>({...t,models:!1}))},[N,u]),Hn=n.useCallback(async()=>{if(u){L(t=>({...t,license:!0}));try{const{data:t,error:i}=await Ge.from("licenses").select("license_type,is_active,expires_at,issued_at").eq("user_id",u).order("issued_at",{ascending:!1}).limit(1);if(i)throw i;C(t?.[0]||null)}catch{C(null)}L(t=>({...t,license:!1}))}},[u]),js=n.useCallback(async()=>{if(u){L(t=>({...t,subscription:!0}));try{const t=await sr();t?.data?S(t.data):S(null)}catch{S(null)}L(t=>({...t,subscription:!1}))}},[u]),qn=n.useCallback(async()=>{const t=w?.subscription_id;if(!t){B(null);return}L(i=>({...i,subscriptionUsage:!0}));try{const i=await tr(t);i?.data?B(i.data):B(null)}catch{B(null)}L(i=>({...i,subscriptionUsage:!1}))},[w?.subscription_id]),lo=n.useCallback(async()=>{if(u){L(t=>({...t,diagnostics:!0}));try{let t=Ge.from("ide_diagnostics_events").select("*").eq("user_id",u).order("created_at",{ascending:!1}).limit(200);if(N&&(t=t.eq("project_id",String(N))),us&&(t=t.eq("event_type",us)),ms&&(t=t.eq("kind",ms)),xs&&(t=t.eq("app_version",xs)),ds){const p=ds.trim();p&&(t=t.or(`message.ilike.%${p}%,platform.ilike.%${p}%,app_version.ilike.%${p}%,kind.ilike.%${p}%,source.ilike.%${p}%`))}const{data:i,error:d}=await t;if(d)throw d;Tn(i||[])}catch{Tn([])}L(t=>({...t,diagnostics:!1}))}},[xs,ms,ds,us,N,u]),vs=n.useCallback(async()=>{L(t=>({...t,trial:!0}));try{const t=await er();F(t?.data||null)}catch{F(null)}L(t=>({...t,trial:!1}))},[]),It=n.useCallback(async()=>{if(!u||!N){et([]);return}L(t=>({...t,trainingRuns:!0}));try{const{data:t,error:i}=await Ge.from("training_runs").select("*").eq("user_id",u).eq("project_id",N).order("start_time",{ascending:!1}).limit(50);if(i)throw i;et(t||[])}catch{et([])}L(t=>({...t,trainingRuns:!1}))},[N,u]),bs=n.useCallback(async()=>{if(u){L(t=>({...t,sync:!0}));try{const{data:t}=await Ge.from("ide_auth_tokens").select("last_sync_at").eq("user_id",u).order("issued_at",{ascending:!1}).limit(1),{data:i}=await Ge.from("ide_sync_events").select("created_at,sync_status,error_message,ide_version,ide_platform,event_data").eq("user_id",u).order("created_at",{ascending:!1}).limit(25),d=t?.[0]||null,p=i||[],A=(N?p.find(k=>String(k?.event_data?.project_id||"")===String(N)):null)||p[0]||null;kn({lastSyncAt:d?.last_sync_at||null,lastSyncEventAt:A?.created_at||null,lastSyncEventStatus:A?.sync_status||null,lastSyncError:A?.error_message||null,lastIdeVersion:A?.ide_version||null,lastIdePlatform:A?.ide_platform||null})}catch{kn({lastSyncAt:null,lastSyncEventAt:null,lastSyncEventStatus:null,lastSyncError:null,lastIdeVersion:null,lastIdePlatform:null})}L(t=>({...t,sync:!1}))}},[N,u]),At=n.useMemo(()=>{const t=we.trim().toLowerCase(),i=pe;let d=[...ne||[]];t&&(d=d.filter(j=>[j?.model_name,j?.model,j?.base_model,j?.status,j?.gpu_type].filter(Boolean).join(" ").toLowerCase().includes(t))),i!=="all"&&(d=d.filter(j=>String(j?.status||"").toLowerCase()===i));const p=Se==="asc"?1:-1;return d.sort((j,A)=>{const k=j?.[se],W=A?.[se],V=k==null?"":String(k),le=W==null?"":String(W);return se.includes("time")||se.includes("at")||se.includes("date")?(new Date(V).getTime()-new Date(le).getTime())*p:!Number.isNaN(Number(V))&&!Number.isNaN(Number(le))?(Number(V)-Number(le))*p:V.localeCompare(le)*p}),d},[ne,we,Se,se,pe]),ys=n.useMemo(()=>{const t=Number(Le||25);return Math.max(1,Math.ceil((At.length||0)/t))},[At.length,Le]),Tt=n.useMemo(()=>Math.min(Math.max(1,wt||1),ys),[wt,ys]),$t=n.useMemo(()=>{const t=Number(Le||25),i=(Tt-1)*t;return At.slice(i,i+t)},[At,Tt,Le]),Lt=n.useMemo(()=>{const t=_e.trim().toLowerCase();let i=[...Et||[]];t&&(i=i.filter(p=>[p?.model_name,p?.name,p?.base_model,p?.version,p?.model_version].filter(Boolean).join(" ").toLowerCase().includes(t)));const d=Ce==="asc"?1:-1;return i.sort((p,j)=>{const A=p?.[fe],k=j?.[fe],W=A==null?"":String(A),V=k==null?"":String(k);return(new Date(W).getTime()-new Date(V).getTime())*d}),i},[_e,Ce,fe,Et]),Ns=n.useMemo(()=>{const t=Number(Oe||25);return Math.max(1,Math.ceil((Lt.length||0)/t))},[Lt.length,Oe]),Ot=n.useMemo(()=>Math.min(Math.max(1,Ct||1),Ns),[Ct,Ns]),Ft=n.useMemo(()=>{const t=Number(Oe||25),i=(Ot-1)*t;return Lt.slice(i,i+t)},[Lt,Ot,Oe]),Ut=n.useMemo(()=>{const t=ke.trim().toLowerCase(),i=ge;let d=[...ie||[]];i!=="all"&&(d=d.filter(j=>String(j?.format||"").toLowerCase()===i)),t&&(d=d.filter(j=>[j?.format,j?.artifact_name,j?.artifact,j?.model_name].filter(Boolean).join(" ").toLowerCase().includes(t)));const p=Me==="asc"?1:-1;return d.sort((j,A)=>{const k=j?.[je]||j?.created_at,W=A?.[je]||A?.created_at;return(new Date(k||0).getTime()-new Date(W||0).getTime())*p}),d},[ge,ke,Me,je,ie]),ws=n.useMemo(()=>{const t=Number(Fe||25);return Math.max(1,Math.ceil((Ut.length||0)/t))},[Ut.length,Fe]),zt=n.useMemo(()=>Math.min(Math.max(1,Rt||1),ws),[Rt,ws]),Gt=n.useMemo(()=>{const t=Number(Fe||25),i=(zt-1)*t;return Ut.slice(i,i+t)},[Ut,zt,Fe]);return n.useEffect(()=>{ps()},[ps]),n.useEffect(()=>{qs()},[qs]),n.useEffect(()=>{Hn(),js(),vs()},[Hn,js,vs]),n.useEffect(()=>{o==="billing"&&Ie()},[o,Ie]),n.useEffect(()=>{qn()},[qn]),n.useEffect(()=>{Pt(),It(),bs()},[Pt,bs,It]),n.useEffect(()=>{fs(),gs()},[gs,fs]),n.useEffect(()=>{if(!u)return;const t=Mo(u,{usageTracking:()=>{fs()},subscription:()=>{js(),vs(),o==="billing"&&Ie()},ideSync:()=>{bs(),gs()},models:()=>{Pt()},trainingRuns:()=>{It()},projects:()=>{ps()}});return()=>{t?.()}},[o,Ie,Pt,ps,js,bs,gs,It,vs,fs,u]),e.jsxs(ai,{defaultOpen:c,className:"dark min-h-svh w-full bg-background text-foreground antialiased",style:{"--sidebar-width":"20rem","--sidebar-width-mobile":"20rem"},children:[e.jsx(Yc,{navigate:r,user:{name:h,email:s?.user?.email||"",avatar:""},projects:Y,onSignOut:g}),e.jsxs(oi,{className:"min-w-0 flex-1 w-auto min-h-0 md:min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 border-b p-2 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ii,{}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:"Dashboard"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Your workspace overview"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden text-right sm:block",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:h}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last sync: ",ve.lastSync]})]}),e.jsx(Es,{className:"h-9 w-9",children:e.jsx(Ds,{className:"text-xs font-semibold",children:f})})]})]}),e.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4",style:{scrollbarGutter:"stable"},children:no?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-4 w-4"}),"Connect your IDE to start"]}),e.jsx(P,{children:"This web dashboard is read-only. Projects, runs, and exports are created in the ML Forge IDE and then synced here."})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{onClick:()=>r?.("/download"),children:[e.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Download IDE"]}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/docs"),children:"View docs"}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2?tab=diagnostics"),children:"Troubleshoot sync"}),e.jsxs(b,{variant:"outline",onClick:()=>Vn(),children:[e.jsx(_s,{className:"mr-2 h-4 w-4"}),"Copy diagnostics"]})]}),e.jsx("div",{className:"space-y-2",children:Dt.steps.slice(0,4).map(t=>{const i=t.done?vi:vr;return e.jsxs("div",{className:"flex items-start justify-between gap-3 rounded-md border bg-background p-3",children:[e.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 text-muted-foreground",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.detail})]})]}),e.jsx(b,{variant:t.done?"outline":"default",size:"sm",onClick:t.cta.onClick,children:t.cta.label})]},t.key)})})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Current status"}),e.jsx(P,{children:"What we know about your IDE connection"})]}),e.jsxs(I,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"Sync health"}),e.jsx("div",{className:"font-semibold tracking-tight",children:ve.status})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"Last sync"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve.lastSync})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground",children:"Last event"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve.lastEvent})]})]})]})]}):e.jsx("div",{className:"w-full",children:e.jsxs(ur,{value:o,onValueChange:l,className:"w-full",children:[e.jsxs(dn,{className:"mb-4 flex h-auto flex-wrap justify-start gap-1",children:[e.jsx(J,{value:"overview",children:"Overview"}),e.jsx(J,{value:"projects",children:"Projects"}),e.jsx(J,{value:"activity",children:"Activity"}),e.jsx(J,{value:"runs",children:"Runs"}),e.jsx(J,{value:"models",children:"Models"}),e.jsx(J,{value:"exports",children:"Exports"}),e.jsx(J,{value:"billing",children:"Billing"}),e.jsx(J,{value:"diagnostics",children:"Diagnostics"}),e.jsx(J,{value:"settings",children:"Settings"})]}),e.jsxs(re,{value:"overview",className:"space-y-4",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Workspace"}),e.jsx(P,{children:"Read-only web dashboard. Projects, runs, models, and exports are created in the IDE and synced here."})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Account"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:h}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s?.user?.email||""})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sync health"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:ve.status}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last sync: ",ve.lastSync]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{variant:"outline",onClick:()=>r?.("/download"),children:[e.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Download hub"]}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/docs"),children:"View docs"}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/teams"),children:"Teams"}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2?tab=billing"),children:"Billing"}),e.jsx(b,{variant:"outline",onClick:()=>g(),children:"Logout"})]})]})]}),w?.plan_type==="free"&&!T&&e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Optional: unlock higher limits"}),e.jsx(P,{children:"Upgrade if youre hitting limits (projects, exports, GPU hours)."})]}),e.jsx(I,{children:e.jsx(b,{onClick:()=>r?.("/pricing"),children:"See plans"})})]}),T&&e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Trial period active"}),e.jsx(P,{children:T?.ends_at?`Your trial ends on ${Q(T.ends_at)}.`:"Your trial is currently active."})]}),e.jsx(I,{children:e.jsx(b,{onClick:()=>r?.("/pricing"),children:"Choose a plan"})})]}),!N&&e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"No project selected"}),e.jsx(P,{children:"Select a project to view project-scoped sync health, runs, models, and exports."})]}),e.jsxs(I,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("div",{children:"- Choose a project from the selector below"}),e.jsx("div",{children:"- Or open the Projects tab to pick one"})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Project"}),e.jsx(P,{children:"Scope your dashboard to a single project"})]}),e.jsxs(I,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:We?Gs(We):"No project"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Datasets: ",mt,"  Exports: ",ie.length,"  GPU hours: ",ze.totalGpuHours]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Switch"}),e.jsx("select",{className:"h-9 rounded-md border bg-background px-3 text-sm",value:N,onChange:t=>zs(t.target.value),children:Y.map(t=>e.jsx("option",{value:String(ut(t)),children:Gs(t)},String(ut(t))))})]})]})]}),N&&e.jsxs("div",{className:"grid gap-3 lg:grid-cols-2",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Resource summary"}),e.jsx(P,{children:"Project-level compute & artifacts"})]}),e.jsxs(I,{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Training runs"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:ne.length})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Models"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:Et.length})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"GPU hours"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:ze.totalGpuHours}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ze.lastGpuType?`${ze.lastGpuType}${ze.lastGpuCount?`  x${ze.lastGpuCount}`:""}`:""})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Exports"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:ie.length})]})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Dataset & annotations"}),e.jsx(P,{children:"Dataset stats (placeholder)"})]}),e.jsxs(I,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:"Datasets"}),e.jsx("div",{className:"font-semibold tracking-tight text-foreground",children:mt})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:"Annotations"}),e.jsx("div",{className:"text-xs",children:""})]}),e.jsx("div",{className:"text-xs",children:"Annotation metrics will appear once the IDE reports them for this project."})]})]}),e.jsxs(R,{className:"lg:col-span-2",children:[e.jsxs(E,{children:[e.jsx(D,{children:"Live activity"}),e.jsx(P,{children:"Latest training runs for this project"})]}),e.jsxs(I,{className:"space-y-3",children:[ne.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.name||t.run_name||t.model_name||"Training run"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(t.status||"unknown").toString(),"  ",t.created_at?Q(t.created_at):""]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.gpu_hours_used?`${Number(t.gpu_hours_used).toFixed(2)} GPUh`:""})]},String(t.id||t.run_id||`${t.created_at}-${t.status}`))),ne.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No training runs found for this project yet."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 lg:grid-cols-4",children:[e.jsxs(R,{children:[e.jsxs(E,{className:"pb-2",children:[e.jsx(P,{children:"Projects"}),e.jsx(D,{className:"text-2xl",children:hs.projects})]}),e.jsx(I,{className:"text-xs text-muted-foreground",children:"Active in the last 7 days"})]}),e.jsxs(R,{children:[e.jsxs(E,{className:"pb-2",children:[e.jsx(P,{children:"Datasets"}),e.jsx(D,{className:"text-2xl",children:hs.datasets})]}),e.jsx(I,{className:"text-xs text-muted-foreground",children:"Synced from the IDE"})]}),e.jsxs(R,{children:[e.jsxs(E,{className:"pb-2",children:[e.jsx(P,{children:"Exports"}),e.jsx(D,{className:"text-2xl",children:hs.exports})]}),e.jsx(I,{className:"text-xs text-muted-foreground",children:"Artifacts tracked"})]}),e.jsxs(R,{children:[e.jsxs(E,{className:"pb-2",children:[e.jsx(P,{children:"GPU Hours"}),e.jsx(D,{className:"text-2xl",children:hs.gpuHours})]}),e.jsx(I,{className:"text-xs text-muted-foreground",children:"This billing period"})]})]}),e.jsxs("div",{className:"grid gap-3 lg:grid-cols-2",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(D,{children:"Sync status"}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>Vn(),children:[e.jsx(_s,{className:"mr-2 h-4 w-4"}),"Copy diagnostics"]})]}),e.jsx(P,{children:"IDE  dashboard metadata sync"})]}),e.jsxs(I,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:ve.status}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last sync: ",ve.lastSync]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last event: ",ve.lastEvent]}),(z.lastIdeVersion||z.lastIdePlatform)&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["IDE: ",z.lastIdePlatform||"Unknown","  ",z.lastIdeVersion||"Unknown"]}),z.lastSyncError&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Error: ",z.lastSyncError]})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(D,{children:"Training runs"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>r?.("/dashboard-v2?tab=runs"),children:"View all"})]}),e.jsx(P,{children:"Latest runs for the selected project"})]}),e.jsx(I,{className:"space-y-3",children:y.trainingRuns?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-5 w-2/3"}),e.jsx(G,{className:"h-5 w-1/2"}),e.jsx(G,{className:"h-5 w-3/4"})]}):N&&ne.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No training runs yet."}):N?ne.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.model_name||t.model||t.name||"Training run"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(t.status||"unknown").toString(),"  ",t.start_time?Q(t.start_time):t.created_at?Q(t.created_at):""]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.gpu_hours_used?`${Number(t.gpu_hours_used).toFixed(2)} GPUh`:""})]},String(t.id||t.run_id||`${t.start_time||t.created_at}-${t.status}`))):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a project to see runs."})})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(D,{children:"Recent activity"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>r?.("/dashboard-v2?tab=diagnostics"),children:"View all"})]}),e.jsx(P,{children:"Latest events synced from your IDE"})]}),e.jsx(I,{className:"space-y-3",children:y.timeline?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading timeline"}):Hs.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No sync activity yet."}):Hs.map(t=>{const i=t.icon;return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 rounded-md border p-1 text-muted-foreground",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.detail})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.time})]},t.key)})})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(D,{children:"Models"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>r?.("/dashboard-v2?tab=models"),children:"View all"})]}),e.jsx(P,{children:"Recently trained models"})]}),e.jsx(I,{className:"space-y-3",children:y.models?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-5 w-2/3"}),e.jsx(G,{className:"h-5 w-1/2"}),e.jsx(G,{className:"h-5 w-3/4"})]}):N?Et.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No models yet."}):Et.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.model_name||t.name||t.base_model||"Model"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.version||t.model_version?`v${t.version||t.model_version}`:"",t.trained_at?`  ${Q(t.trained_at)}`:t.updated_at?`  ${Q(t.updated_at)}`:""]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.status?String(t.status):""})]},String(t.id||t.model_id||`${t.trained_at||t.updated_at}-${t.name}`))):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a project to see models."})})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(D,{children:"Exports"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>r?.("/dashboard-v2?tab=exports"),children:"View all"})]}),e.jsx(P,{children:"Latest export artifacts"})]}),e.jsx(I,{className:"space-y-3",children:y.exports?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-5 w-2/3"}),e.jsx(G,{className:"h-5 w-1/2"}),e.jsx(G,{className:"h-5 w-3/4"})]}):ie.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:N?"No exports yet.":"Select a project to see exports."}):ie.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.name||t.export_name||t.format||"Export"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(t.status||"unknown").toString(),"  ",t.created_at?Q(t.created_at):""]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.download_url?e.jsx(b,{variant:"outline",size:"sm",onClick:()=>window.open(t.download_url,"_blank"),children:"Open"}):""})]},String(t.id||t.export_id||`${t.created_at}-${t.format}`)))})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Usage & limits"}),e.jsxs(P,{children:["Plan: ",q.tier]})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("div",{children:"Projects"}),e.jsxs("div",{children:[q.projects.used,q.projects.limit==null?"":Number(q.projects.limit)===-1?" / ":` / ${q.projects.limit}`]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full bg-foreground",style:{width:`${Math.min(100,q.projects.pct??0)}%`}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("div",{children:"Exports (monthly)"}),e.jsxs("div",{children:[q.exports.used,q.exports.limit==null?"":Number(q.exports.limit)===-1?" / ":` / ${q.exports.limit}`]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full bg-foreground",style:{width:`${Math.min(100,q.exports.pct??0)}%`}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("div",{children:"Training runs (monthly)"}),e.jsxs("div",{children:[q.runs.used,q.runs.limit==null?"":Number(q.runs.limit)===-1?" / ":` / ${q.runs.limit}`]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full bg-foreground",style:{width:`${Math.min(100,q.runs.pct??0)}%`}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("div",{children:"GPU hours (monthly)"}),e.jsxs("div",{children:[q.gpu.used.toFixed(2),q.gpu.limit==null?"":Number(q.gpu.limit)===-1?" / ":` / ${Number(q.gpu.limit).toFixed(2)}`]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full bg-foreground",style:{width:`${Math.min(100,q.gpu.pct??0)}%`}})})]})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Next steps"}),e.jsx(P,{children:Kn.title})]}),e.jsx(I,{className:"space-y-3",children:Kn.items.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.detail})]},t.title))})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Usage chart"}),e.jsx(P,{children:"Subscription GPU usage (last 30 points)"})]}),e.jsx(I,{children:y.subscriptionUsage?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-6 w-1/2"}),e.jsx(G,{className:"h-48 w-full"})]}):U?e.jsx(en,{data:U,type:"line",title:"GPU Hours"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No subscription usage data available."})})]})]})]}),e.jsx(re,{value:"settings",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Account"}),e.jsx(P,{children:"Basic account details and shortcuts."})]}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Name"}),e.jsx("div",{className:"font-medium",children:(()=>{const t=s?.user?.user_metadata||{};return[t.first_name,t.last_name].filter(Boolean).join(" ")||s?.user?.email||"Account"})()})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Email"}),e.jsx("div",{className:"font-medium",children:s?.user?.email||""})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2?tab=billing"),children:"Billing"}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2?tab=projects"),children:"Projects"}),e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2"),children:"Dashboard"})]})]})]})}),e.jsx(re,{value:"activity",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Activity timeline"}),e.jsx(P,{children:"All recent events"})]}),e.jsx(I,{className:"space-y-3",children:Hs.map(t=>{const i=t.icon;return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 rounded-md border p-1 text-muted-foreground",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.detail})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.time})]},t.key)})})]})}),e.jsxs(re,{value:"runs",children:[he&&e.jsxs(R,{className:"mb-3",children:[e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsx(D,{children:"Run details"}),e.jsx(P,{children:_?`Run ${he}`:`Run ${he} not found in current project`})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>ts(""),children:"Close"})]})}),e.jsx(I,{className:"space-y-4",children:_?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Model"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:_?.model_name||_?.model||_?.base_model||"-"})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx("div",{className:"pt-1",children:e.jsx(Gn,{value:_?.status||"Unknown"})})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"GPU hours"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:Number(_?.gpu_hours_used||0).toFixed(2)})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Started"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:Q(_?.start_time||_?.created_at)})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Finished"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:Q(_?.end_time||_?.finished_at)})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Finished reason"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:_?.finished_reason||"-"})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Last heartbeat"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:Q(_?.last_heartbeat_at)})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"IDE"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:[_?.ide_platform,_?.ide_build,_?.ide_version].filter(Boolean).join("  ")||"-"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Git"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight",children:[_?.git_branch,_?.git_commit].filter(Boolean).join("  ")||"-"})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Config hash"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight truncate",title:_?.config_hash||"",children:_?.config_hash||"-"})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dataset ref"}),e.jsx("div",{className:"text-sm font-semibold tracking-tight truncate",title:m(_?.dataset_ref||null),children:_?.dataset_ref&&Object.keys(_.dataset_ref||{}).length>0?"Linked":"-"})]}),e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Run ID"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[e.jsx("div",{className:"min-w-0 truncate text-sm font-semibold tracking-tight",title:String(_?.run_id||_?.id||he),children:String(_?.run_id||_?.id||he)}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>navigator.clipboard?.writeText?.(String(_?.run_id||_?.id||he)),children:[e.jsx(_s,{}),"Copy"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 lg:grid-cols-3",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{className:"text-base",children:"Metrics"}),e.jsx(P,{children:"Final metrics + timeseries"})]}),e.jsxs(I,{className:"space-y-3",children:[v(_?.metrics||_?.final_metrics).length>0?e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Key"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Value"})]})}),e.jsx("tbody",{children:v(_?.metrics||_?.final_metrics).map(([t,i])=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:t}),e.jsx("td",{className:"px-3 py-2 text-muted-foreground",children:typeof i=="object"?m(i):String(i)})]},t))})]})}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No metrics synced for this run yet."}),_?.metrics_timeseries&&v(_?.metrics_timeseries).length>0?e.jsxs("details",{className:"rounded-md border bg-background p-3",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold tracking-tight",children:"Timeseries (raw)"}),e.jsx("pre",{className:"mt-2 max-h-48 overflow-auto whitespace-pre-wrap break-words text-xs text-muted-foreground",children:m(_?.metrics_timeseries)})]}):null]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{className:"text-base",children:"Artifacts"}),e.jsx(P,{children:"Checkpoints, exports, attachments"})]}),e.jsx(I,{className:"space-y-2",children:Array.isArray(_?.artifacts)&&_.artifacts.length>0?e.jsx("div",{className:"space-y-2",children:_.artifacts.map((t,i)=>{const d=String(t?.id||t?.name||t?.path||i),p=t?.name||t?.title||t?.path||`Artifact ${i+1}`,j=[t?.type,t?.format,t?.size_bytes?`${t.size_bytes} bytes`:null].filter(Boolean).join("  "),A=t?.url||t?.download_url||t?.signed_url;return e.jsxs("div",{className:"rounded-md border bg-background p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold tracking-tight",title:String(p),children:p}),e.jsx("div",{className:"text-xs text-muted-foreground",children:j||""})]}),A?e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>window.open(String(A),"_blank"),children:[e.jsx(Kt,{}),"Open"]}):null]}),t&&typeof t=="object"?e.jsx("pre",{className:"mt-2 max-h-32 overflow-auto whitespace-pre-wrap break-words text-xs text-muted-foreground",children:m(t)}):null]},d)})}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No artifacts available for this run yet."})})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{className:"text-base",children:"Logs"}),e.jsx(P,{children:"Build, train, system logs"})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_?.logs_url?e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>window.open(String(_.logs_url),"_blank"),children:[e.jsx(Kt,{}),"Open logs"]}):null,e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>navigator.clipboard?.writeText?.(m(_?.logs_meta||{})),children:[e.jsx(_s,{}),"Copy meta"]})]}),_?.logs_excerpt?e.jsx("pre",{className:"max-h-56 overflow-auto rounded-md border bg-background p-3 whitespace-pre-wrap break-words text-xs text-muted-foreground",children:String(_.logs_excerpt)}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Logs will appear here once synced."}),_?.logs_meta&&v(_?.logs_meta).length>0?e.jsxs("details",{className:"rounded-md border bg-background p-3",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold tracking-tight",children:"Log metadata"}),e.jsx("pre",{className:"mt-2 max-h-40 overflow-auto whitespace-pre-wrap break-words text-xs text-muted-foreground",children:m(_?.logs_meta)})]}):null]})]})]})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a run from this project to view details."})})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Training runs"}),e.jsx(P,{children:"Latest runs"})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(Cs,{className:"pointer-events-none absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(xt,{ref:Dn,value:we,onChange:t=>rs(t.target.value),placeholder:"Search runs",className:"pl-8"})]}),e.jsxs(be,{open:Za,onOpenChange:tt,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(rr,{}),pe==="all"?"Status":`Status: ${pe}`]})}),e.jsxs(ce,{align:"start",children:[e.jsx(O,{onSelect:t=>{t.preventDefault(),He("all"),tt(!1)},children:"All"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),He("running"),tt(!1)},children:"Running"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),He("completed"),tt(!1)},children:"Completed"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),He("failed"),tt(!1)},children:"Failed"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(be,{open:Ja,onOpenChange:Nt,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(tn,{}),`Sort: ${Bs(se,Se,{start_time:"Start time",gpu_hours_used:"GPU hours",status:"Status"})}`]})}),e.jsxs(ce,{align:"end",children:[e.jsx(O,{onSelect:t=>{t.preventDefault(),nt("start_time"),rt(i=>i==="asc"?"desc":"asc"),Nt(!1)},children:"Start time"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),nt("gpu_hours_used"),rt(i=>i==="asc"?"desc":"asc"),Nt(!1)},children:"GPU hours"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),nt("status"),rt(i=>i==="asc"?"desc":"asc"),Nt(!1)},children:"Status"})]})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>It(),disabled:y.trainingRuns,children:[e.jsx(Bt,{}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[we.trim()&&e.jsxs(Ue,{onClick:()=>Dn.current?.focus?.(),onClear:()=>rs(""),children:["Search: ",we.trim()]}),pe!=="all"&&e.jsxs(Ue,{onClick:()=>tt(!0),onClear:()=>He("all"),children:["Status: ",pe]}),(se!=="start_time"||Se!=="desc")&&e.jsxs(Ue,{onClick:()=>Nt(!0),onClear:()=>{nt("start_time"),rt("desc")},children:["Sort: ",se," (",Se,")"]}),(we.trim()||pe!=="all"||se!=="start_time"||Se!=="desc")&&e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>{rs(""),He("all"),nt("start_time"),rt("desc"),ot(new Set)},children:"Reset"})]}),at.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-md border bg-muted/20 p-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected: ",e.jsx("span",{className:"font-semibold text-foreground",children:at.size})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard?.writeText?.([...at].join(`
`))},children:"Copy IDs"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{const t=[["id"],...[...at].map(i=>[i])];Vs("runs-ids.csv",t)},children:"Export CSV"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>ot(new Set),children:"Clear selection"})]})]}),e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"w-10 px-3 py-2 text-left font-medium",children:e.jsx("input",{type:"checkbox",checked:$t.length>0&&$t.every(t=>at.has(String(t?.id||t?.run_id||""))),onChange:t=>{if(t.target.checked){const i=$t.map(d=>String(d?.id||d?.run_id||"")).filter(Boolean);ot(d=>new Set([...d,...i]))}else{const i=new Set($t.map(d=>String(d?.id||d?.run_id||"")).filter(Boolean));ot(d=>{const p=new Set(d);return i.forEach(j=>p.delete(j)),p})}}})}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Model"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"GPU Hours"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Started"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Actions"})]})}),e.jsxs("tbody",{children:[y.trainingRuns&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:6,children:e.jsx(G,{className:"h-5 w-full"})})}),e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:6,children:e.jsx(G,{className:"h-5 w-full"})})})]}),!y.trainingRuns&&At.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-sm text-muted-foreground",colSpan:6,children:"No runs found for this project."})}),!y.trainingRuns&&$t.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:at.has(String(t?.id||t?.run_id||"")),onChange:i=>{const d=String(t?.id||t?.run_id||"");ot(p=>{const j=new Set(p);return i.target.checked?j.add(d):j.delete(d),j})}})}),e.jsx("td",{className:"px-3 py-2",children:t?.model_name||t?.model||t?.base_model||"-"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(Gn,{value:t?.status||"Unknown"})}),e.jsx("td",{className:"px-3 py-2",children:Number(t?.gpu_hours_used||0).toFixed(2)}),e.jsx("td",{className:"px-3 py-2",children:Q(t?.start_time||t?.created_at)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ht,{})})}),e.jsxs(ce,{align:"end",children:[e.jsx(O,{onSelect:i=>{i.preventDefault();const d=String(t?.id||t?.run_id||"");ts(d)},children:"View details"}),e.jsx(O,{onSelect:i=>{i.preventDefault(),navigator.clipboard?.writeText?.(String(t?.id||t?.run_id||""))},children:"Copy ID"})]})]})})]},String(t?.id||t?.run_id||t?.start_time)))]})]})}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Page ",Tt," of ",ys]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:["Page size",e.jsxs("select",{className:"h-8 rounded-md border bg-background px-2 text-xs",value:Le,onChange:t=>Mn(Number(t.target.value)||25),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsx(b,{variant:"outline",size:"sm",disabled:Tt<=1,onClick:()=>as(t=>Math.max(1,(t||1)-1)),children:"Prev"}),e.jsx(b,{variant:"outline",size:"sm",disabled:Tt>=ys,onClick:()=>as(t=>(t||1)+1),children:"Next"})]})]})]})]})]}),e.jsx(re,{value:"models",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Models"}),e.jsx(P,{children:"Registered models"})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(Cs,{className:"pointer-events-none absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(xt,{ref:Pn,value:_e,onChange:t=>os(t.target.value),placeholder:"Search models",className:"pl-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(be,{open:eo,onOpenChange:ss,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(tn,{}),`Sort: ${Bs(fe,Ce,{trained_at:"Trained at",updated_at:"Updated at"})}`]})}),e.jsxs(ce,{align:"end",children:[e.jsx(O,{onSelect:t=>{t.preventDefault(),St("trained_at"),_t(i=>i==="asc"?"desc":"asc"),ss(!1)},children:"Trained at"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),St("updated_at"),_t(i=>i==="asc"?"desc":"asc"),ss(!1)},children:"Updated at"})]})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>Pt(),disabled:y.models,children:[e.jsx(Bt,{}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[_e.trim()&&e.jsxs(Ue,{onClick:()=>Pn.current?.focus?.(),onClear:()=>os(""),children:["Search: ",_e.trim()]}),(fe!=="trained_at"||Ce!=="desc")&&e.jsxs(Ue,{onClick:()=>ss(!0),onClear:()=>{St("trained_at"),_t("desc")},children:["Sort: ",fe," (",Ce,")"]}),(_e.trim()||fe!=="trained_at"||Ce!=="desc")&&e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>{os(""),St("trained_at"),_t("desc"),lt(new Set)},children:"Reset"})]}),it.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-md border bg-muted/20 p-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected: ",e.jsx("span",{className:"font-semibold text-foreground",children:it.size})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard?.writeText?.([...it].join(`
`))},children:"Copy IDs"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{const t=[["id"],...[...it].map(i=>[i])];Vs("models-ids.csv",t)},children:"Export CSV"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>lt(new Set),children:"Clear selection"})]})]}),e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"w-10 px-3 py-2 text-left font-medium",children:e.jsx("input",{type:"checkbox",checked:Ft.length>0&&Ft.every(t=>it.has(String(t?.id||t?.model_id||""))),onChange:t=>{if(t.target.checked){const i=Ft.map(d=>String(d?.id||d?.model_id||"")).filter(Boolean);lt(d=>new Set([...d,...i]))}else{const i=new Set(Ft.map(d=>String(d?.id||d?.model_id||"")).filter(Boolean));lt(d=>{const p=new Set(d);return i.forEach(j=>p.delete(j)),p})}}})}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Version"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Updated"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Actions"})]})}),e.jsxs("tbody",{children:[y.models&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:5,children:e.jsx(G,{className:"h-5 w-full"})})}),e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:5,children:e.jsx(G,{className:"h-5 w-full"})})})]}),!y.models&&Lt.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-sm text-muted-foreground",colSpan:5,children:"No models found for this project."})}),!y.models&&Ft.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:it.has(String(t?.id||t?.model_id||"")),onChange:i=>{const d=String(t?.id||t?.model_id||"");lt(p=>{const j=new Set(p);return i.target.checked?j.add(d):j.delete(d),j})}})}),e.jsx("td",{className:"px-3 py-2",children:t?.model_name||t?.name||t?.base_model||"-"}),e.jsx("td",{className:"px-3 py-2",children:t?.version||t?.model_version||"-"}),e.jsx("td",{className:"px-3 py-2",children:Q(t?.trained_at||t?.updated_at||t?.created_at)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ht,{})})}),e.jsx(ce,{align:"end",children:e.jsx(O,{onSelect:i=>{i.preventDefault(),navigator.clipboard?.writeText?.(String(t?.id||t?.model_id||""))},children:"Copy ID"})})]})})]},String(t?.id||t?.model_id||t?.trained_at)))]})]})}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Page ",Ot," of ",Ns]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:["Page size",e.jsxs("select",{className:"h-8 rounded-md border bg-background px-2 text-xs",value:Oe,onChange:t=>Rn(Number(t.target.value)||25),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsx(b,{variant:"outline",size:"sm",disabled:Ot<=1,onClick:()=>is(t=>Math.max(1,(t||1)-1)),children:"Prev"}),e.jsx(b,{variant:"outline",size:"sm",disabled:Ot>=Ns,onClick:()=>is(t=>(t||1)+1),children:"Next"})]})]})]})]})}),e.jsx(re,{value:"exports",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Exports"}),e.jsx(P,{children:"Model artifacts"})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(Cs,{className:"pointer-events-none absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(xt,{ref:In,value:ke,onChange:t=>ls(t.target.value),placeholder:"Search exports",className:"pl-8"})]}),e.jsxs(be,{open:to,onOpenChange:st,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(rr,{}),ge==="all"?"Format":`Format: ${String(ge).toUpperCase()}`]})}),e.jsxs(ce,{align:"start",children:[e.jsx(O,{onSelect:t=>{t.preventDefault(),qe("all"),st(!1)},children:"All"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),qe("onnx"),st(!1)},children:"ONNX"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),qe("tensorrt"),st(!1)},children:"TensorRT"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),qe("torchscript"),st(!1)},children:"TorchScript"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(be,{open:so,onOpenChange:ns,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(tn,{}),`Sort: ${Bs(je,Me,{exported_at:"Exported at",created_at:"Created at"})}`]})}),e.jsxs(ce,{align:"end",children:[e.jsx(O,{onSelect:t=>{t.preventDefault(),kt("exported_at"),Mt(i=>i==="asc"?"desc":"asc"),ns(!1)},children:"Exported at"}),e.jsx(O,{onSelect:t=>{t.preventDefault(),kt("created_at"),Mt(i=>i==="asc"?"desc":"asc"),ns(!1)},children:"Created at"})]})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>qs(),disabled:y.exports,children:[e.jsx(Bt,{}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[ke.trim()&&e.jsxs(Ue,{onClick:()=>In.current?.focus?.(),onClear:()=>ls(""),children:["Search: ",ke.trim()]}),ge!=="all"&&e.jsxs(Ue,{onClick:()=>st(!0),onClear:()=>qe("all"),children:["Format: ",ge]}),(je!=="exported_at"||Me!=="desc")&&e.jsxs(Ue,{onClick:()=>ns(!0),onClear:()=>{kt("exported_at"),Mt("desc")},children:["Sort: ",je," (",Me,")"]}),(ke.trim()||ge!=="all"||je!=="exported_at"||Me!=="desc")&&e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>{ls(""),qe("all"),kt("exported_at"),Mt("desc"),dt(new Set)},children:"Reset"})]}),ct.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-md border bg-muted/20 p-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected: ",e.jsx("span",{className:"font-semibold text-foreground",children:ct.size})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard?.writeText?.([...ct].join(`
`))},children:"Copy IDs"}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{const t=[["id"],...[...ct].map(i=>[i])];Vs("exports-ids.csv",t)},children:"Export CSV"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>dt(new Set),children:"Clear selection"})]})]}),e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"w-10 px-3 py-2 text-left font-medium",children:e.jsx("input",{type:"checkbox",checked:Gt.length>0&&Gt.every(t=>ct.has(String(t?.id||t?.export_id||""))),onChange:t=>{if(t.target.checked){const i=Gt.map(d=>String(d?.id||d?.export_id||"")).filter(Boolean);dt(d=>new Set([...d,...i]))}else{const i=new Set(Gt.map(d=>String(d?.id||d?.export_id||"")).filter(Boolean));dt(d=>{const p=new Set(d);return i.forEach(j=>p.delete(j)),p})}}})}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Format"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Artifact"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Created"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Actions"})]})}),e.jsxs("tbody",{children:[y.exports&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:5,children:e.jsx(G,{className:"h-5 w-full"})})}),e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:5,children:e.jsx(G,{className:"h-5 w-full"})})})]}),!y.exports&&Ut.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-sm text-muted-foreground",colSpan:5,children:"No exports found for this project."})}),!y.exports&&Gt.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:ct.has(String(t?.id||t?.export_id||"")),onChange:i=>{const d=String(t?.id||t?.export_id||"");dt(p=>{const j=new Set(p);return i.target.checked?j.add(d):j.delete(d),j})}})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"font-medium",children:(t?.format||"-").toString().toUpperCase()})}),e.jsx("td",{className:"px-3 py-2",children:t?.artifact_name||t?.artifact||t?.model_name||"-"}),e.jsx("td",{className:"px-3 py-2",children:Q(t?.exported_at||t?.created_at)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ht,{})})}),e.jsx(ce,{align:"end",children:e.jsx(O,{onSelect:i=>{i.preventDefault(),navigator.clipboard?.writeText?.(String(t?.id||t?.export_id||""))},children:"Copy ID"})})]})})]},String(t?.id||t?.export_id||t?.exported_at)))]})]})}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Page ",zt," of ",ws]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:["Page size",e.jsxs("select",{className:"h-8 rounded-md border bg-background px-2 text-xs",value:Fe,onChange:t=>En(Number(t.target.value)||25),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsx(b,{variant:"outline",size:"sm",disabled:zt<=1,onClick:()=>cs(t=>Math.max(1,(t||1)-1)),children:"Prev"}),e.jsx(b,{variant:"outline",size:"sm",disabled:zt>=ws,onClick:()=>cs(t=>(t||1)+1),children:"Next"})]})]})]})]})}),e.jsx(re,{value:"billing",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Billing"}),e.jsx(P,{children:"Subscription, usage, invoices, and payment methods"})]}),e.jsx(I,{className:"space-y-4",children:e.jsxs(ur,{value:Ne,onValueChange:ue,children:[e.jsxs(dn,{children:[e.jsx(J,{value:"overview",children:"Overview"}),e.jsx(J,{value:"usage",children:"Usage"}),e.jsx(J,{value:"invoices",children:"Invoices"}),e.jsx(J,{value:"payment",children:"Payment methods"}),e.jsx(J,{value:"history",children:"Change history"})]}),e.jsx(re,{value:"overview",className:"space-y-3",children:e.jsxs("div",{className:"grid gap-3 lg:grid-cols-2",children:[e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Current plan"}),e.jsx(P,{children:"Status and billing period"})]}),e.jsxs(I,{className:"space-y-3",children:[y.billing?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-5 w-1/2"}),e.jsx(G,{className:"h-5 w-2/3"}),e.jsx(G,{className:"h-5 w-1/3"})]}):e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Plan"}),e.jsx("div",{className:"font-medium",children:w?.plan_name||w?.plan_type||"Free"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Status"}),e.jsx("div",{className:"font-medium",children:H?.status||"Active (Free)"})]}),H?.current_period_start&&H?.current_period_end?e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Period"}),e.jsxs("div",{className:"font-medium",children:[Ws(H.current_period_start)," - ",Ws(H.current_period_end)]})]}):null,w?.total_paid_amount?e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Total paid"}),e.jsx("div",{className:"font-medium",children:Js(w.total_paid_amount)})]}):null]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[H?H.cancel_at_period_end?e.jsx(b,{variant:"outline",onClick:oo,children:"Resume subscription"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outline",onClick:()=>r?.("/pricing"),children:"Change plan"}),e.jsx(b,{variant:"outline",onClick:ao,children:"Cancel subscription"})]}):e.jsx(b,{variant:"outline",onClick:()=>r?.("/pricing"),children:"Compare plans"}),e.jsxs(b,{variant:"outline",onClick:()=>Ie(),disabled:y.billing,children:[e.jsx(Bt,{}),"Refresh"]})]})]})]}),e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Usage chart"}),e.jsx(P,{children:"GPU usage (last 30 days)"})]}),e.jsx(I,{children:es?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-6 w-1/2"}),e.jsx(G,{className:"h-48 w-full"})]}):xe?.length?e.jsx(en,{data:xe,type:"line",title:"GPU Usage",height:260}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No usage data available yet."})})]})]})}),e.jsx(re,{value:"usage",className:"space-y-3",children:es?e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"h-6 w-1/2"}),e.jsx(G,{className:"h-48 w-full"})]}):xe?.length?e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Usage analytics"}),e.jsx(P,{children:"GPU usage breakdown"})]}),e.jsxs(I,{children:[e.jsx(en,{data:xe,type:"line",title:"GPU Usage (Last 30 Days)",height:300}),e.jsxs("div",{className:"grid gap-3 pt-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total hours (30 days)"}),e.jsx("div",{className:"text-lg font-semibold",children:xe.reduce((t,i)=>t+i.value,0).toFixed(2)})]}),e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average daily"}),e.jsx("div",{className:"text-lg font-semibold",children:(xe.reduce((t,i)=>t+i.value,0)/30).toFixed(2)})]}),e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Peak usage"}),e.jsx("div",{className:"text-lg font-semibold",children:Math.max(...xe.map(t=>t.value)).toFixed(2)})]})]})]})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No usage data available yet."})}),e.jsx(re,{value:"invoices",className:"space-y-3",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Billing history"}),e.jsx(P,{children:"Invoices and payments"})]}),e.jsx(I,{children:me.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No billing history found."}):e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Invoice"})]})}),e.jsx("tbody",{children:me.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:Ws(t.created_at)}),e.jsx("td",{className:"px-3 py-2",children:t.description||"Subscription payment"}),e.jsx("td",{className:"px-3 py-2",children:Js(t.amount,t.currency)}),e.jsx("td",{className:"px-3 py-2",children:t.status}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.invoice_pdf_url||t.hosted_invoice_url?e.jsx(b,{variant:"outline",size:"sm",onClick:()=>io(t.billing_id),children:t.invoice_pdf_url?"Download":"View"}):e.jsx("span",{className:"text-muted-foreground",children:""})})]},t.billing_id))})]})})})]})}),e.jsx(re,{value:"payment",className:"space-y-3",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Payment methods"}),e.jsx(P,{children:"Saved payment methods"})]}),e.jsxs(I,{children:[Te.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No payment methods found. Add a payment method through the customer portal."}):e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Card"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Expires"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Default"})]})}),e.jsx("tbody",{children:Te.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:t.type==="card"?"Card":"Bank Account"}),e.jsx("td",{className:"px-3 py-2",children:t.card_brand&&t.card_last4?`${t.card_brand.toUpperCase()}  ${t.card_last4}`:""}),e.jsx("td",{className:"px-3 py-2",children:t.card_exp_month&&t.card_exp_year?`${t.card_exp_month}/${t.card_exp_year}`:""}),e.jsx("td",{className:"px-3 py-2",children:t.is_default?"Default":""})]},t.payment_method_id))})]})}),e.jsx("div",{className:"pt-3",children:e.jsx(b,{variant:"outline",onClick:()=>r?.("/dashboard-v2?tab=billing"),children:"Manage payment methods"})})]})]})}),e.jsx(re,{value:"history",className:"space-y-3",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Subscription change history"}),e.jsx(P,{children:"Upgrades/downgrades and prorations"})]}),e.jsx(I,{children:Be.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No changes recorded yet."}):e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Change type"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"From"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"To"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Prorated"})]})}),e.jsx("tbody",{children:Be.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2",children:ro(t.created_at)}),e.jsx("td",{className:"px-3 py-2",children:t.change_type||""}),e.jsx("td",{className:"px-3 py-2",children:t.from_plan||""}),e.jsx("td",{className:"px-3 py-2",children:t.to_plan||""}),e.jsx("td",{className:"px-3 py-2",children:t.prorated_amount?Js(t.prorated_amount):""})]},t.change_id||t.id))})]})})})]})})]})})]})}),e.jsx(re,{value:"diagnostics",children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"IDE diagnostics"}),e.jsx(P,{children:"Events from ide_diagnostics_events (scoped to your account)"})]}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(Cs,{className:"pointer-events-none absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(xt,{value:ds,onChange:t=>$n(t.target.value),placeholder:"Search message/platform/app version",className:"pl-8"})]}),e.jsxs("select",{className:"h-9 rounded-md border bg-background px-3 text-sm",value:us,onChange:t=>Ln(t.target.value),children:[e.jsx("option",{value:"",children:"All types"}),e.jsx("option",{value:"error",children:"error"}),e.jsx("option",{value:"warn",children:"warn"}),e.jsx("option",{value:"info",children:"info"})]}),e.jsx(xt,{value:ms,onChange:t=>On(t.target.value),placeholder:"Filter kind",className:"h-9"}),e.jsx(xt,{value:xs,onChange:t=>Fn(t.target.value),placeholder:"Filter app_version",className:"h-9"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{$n(""),Ln(""),On(""),Fn("")},children:"Reset"}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>lo(),disabled:y.diagnostics,children:[e.jsx(Bt,{}),"Refresh"]})]})]}),e.jsx("div",{className:"overflow-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Time"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Kind"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Platform"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"App"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Message"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Actions"})]})}),e.jsxs("tbody",{children:[y.diagnostics&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:7,children:e.jsx(G,{className:"h-5 w-full"})})}),e.jsx("tr",{className:"border-b",children:e.jsx("td",{className:"px-3 py-3",colSpan:7,children:e.jsx(G,{className:"h-5 w-full"})})})]}),!y.diagnostics&&An.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-sm text-muted-foreground",colSpan:7,children:"No diagnostics events found."})}),!y.diagnostics&&An.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Q(t?.created_at)}),e.jsx("td",{className:"px-3 py-2",children:t?.event_type||"-"}),e.jsx("td",{className:"px-3 py-2",children:t?.kind||"-"}),e.jsx("td",{className:"px-3 py-2",children:t?.platform||"-"}),e.jsx("td",{className:"px-3 py-2",children:t?.app_version||"-"}),e.jsx("td",{className:"px-3 py-2 max-w-[520px] truncate",children:t?.message||"-"}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ht,{})})}),e.jsxs(ce,{align:"end",children:[e.jsx(O,{onSelect:i=>{i.preventDefault(),navigator.clipboard?.writeText?.(String(t?.id||""))},children:"Copy ID"}),e.jsx(O,{onSelect:i=>{i.preventDefault(),navigator.clipboard?.writeText?.(String(t?.message||""))},children:"Copy message"})]})]})})]},String(t?.id)))]})]})})]})]})})]})})})]})]})}export{cd as default};
