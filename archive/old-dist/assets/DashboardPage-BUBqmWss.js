import{u as ue,r as i,j as e,T as G,L as M,s as b}from"./index-UkIvKgPy.js";import{s as he,p as me,h as K,e as pe,g as xe}from"./realtimeSync-Ccs4uHqX.js";import{g as Q}from"./razorpayApi-D6uxyQ4R.js";import{i as x,a as d,g as D,b as _e,c as je,d as ge}from"./usageLimits-B5DWR5Ov.js";import{g as ve}from"./analyticsApi-BUt_Bh-L.js";import{L as U,U as fe}from"./UpgradePrompt-BYfbfL5M.js";import{U as ye}from"./UsageChart-DDzAler7.js";function De({session:Z,navigate:h}){const f=ue(),ee=async()=>{try{await b.auth.signOut(),f.success("Logged out successfully"),h("/")}catch(s){console.error("Logout error:",s),f.error("Failed to logout. Please try again.")}},L=Z?.user,H=L?.user_metadata||{},se=[H.first_name,H.last_name].filter(Boolean).join(" ")||L?.email||"Account",n=L?.id,[w,te]=i.useState(null),[Ne,B]=i.useState(""),[y,W]=i.useState(null),[S,ae]=i.useState([]),[$,re]=i.useState([]),[R,ie]=i.useState(null),[A,ne]=i.useState([]),[k,le]=i.useState(null),[t,oe]=i.useState(null),[O,P]=i.useState([]),[m,I]=i.useState([]),[l,q]=i.useState(""),[p,V]=i.useState({lastSyncAt:null,lastSyncEventAt:null,lastSyncEventStatus:null,lastSyncError:null,lastIdeVersion:null,lastIdePlatform:null}),[Y,de]=i.useState([]),[_,c]=i.useState({license:!0,subscription:!0,projects:!0,exports:!0,usage:!1,activity:!1,usageLimits:!0,models:!1,trainingRuns:!1,activityTimeline:!1}),u=i.useMemo(()=>l&&S.find(s=>s.project_id===l)||null,[S,l]),g=i.useMemo(()=>l?$.filter(s=>s.project_id===l):[],[$,l]),J=i.useMemo(()=>g[0]||null,[g]),C=i.useMemo(()=>l?O.filter(s=>s.project_id===l):[],[O,l]);i.useMemo(()=>C[0]||null,[C]);const z=i.useMemo(()=>{if(!l)return{totalGpuHours:0,lastGpuType:null,lastGpuCount:null};const s=(m||[]).reduce((a,r)=>a+Number(r.gpu_hours_used||0),0),o=m?.[0]||null;return{totalGpuHours:s,lastGpuType:o?.gpu_type||null,lastGpuCount:o?.gpu_count??null}},[l,m]),X=i.useMemo(()=>{if(!l)return{title:"Select a project to begin",items:[{title:"Pick a project",detail:"All metrics and timelines are scoped to a single project."}]};const s=Number(u?.dataset_count||0),o=Number(m?.length||0),a=Number(g?.length||0),r=[];return s===0&&r.push({title:"Create or sync a dataset",detail:"Create your first dataset in the IDE. Once the IDE syncs, the dataset count will appear here."}),s>0&&o===0&&r.push({title:"Run your first training",detail:"Start a training run in the IDE. This dashboard will show run status + final metrics once synced."}),o>0&&a===0&&r.push({title:"Export a model artifact",detail:"Export ONNX/TensorRT/etc. from the IDE. This dashboard stores metadata only (format + timestamp)."}),p.lastSyncAt==null&&r.push({title:"Check IDE sync health",detail:"No sync timestamp reported yet. Make sure the IDE is authenticated and online for metadata sync."}),r.length===0&&r.push({title:"Review latest outputs",detail:"You have runs and exports. Use the tables below to audit provenance, timestamps, and formats."}),{title:"Recommended next steps",items:r}},[l,u,m,g,p.lastSyncAt]);i.useMemo(()=>w?w.is_active?w.expires_at&&new Date(w.expires_at).getTime()<Date.now()?"Expired":"Active":"Inactive":"Unknown",[w]);const F=s=>{if(!s)return"Never";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}},j=s=>{if(!s)return"Never";try{return new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}};return i.useEffect(()=>{let s=!0;return(async()=>{if(n){B(""),c(a=>({...a,license:!0}));try{const{data:a,error:r}=await b.from("licenses").select("license_type,is_active,expires_at,issued_at").eq("user_id",n).order("issued_at",{ascending:!1}).limit(1);if(r)throw r;if(!s)return;te(a?.[0]||null)}catch(a){if(!s)return;B(a?.message||"Unable to load license.")}finally{s&&c(a=>({...a,license:!1}))}}})(),()=>{s=!1}},[n]),i.useEffect(()=>{let s=!0;return(async()=>{if(n){c(a=>({...a,subscription:!0}));try{const{data:a,error:r}=await Q();if(r)throw r;if(!s)return;W(a)}catch(a){if(!s)return;console.error("Error loading subscription summary:",a)}finally{s&&c(a=>({...a,subscription:!1}))}}})(),()=>{s=!1}},[n]),i.useEffect(()=>{let s=!0;return(async()=>{if(n){c(a=>({...a,projects:!0}));try{const{data:a,error:r}=await me.getProjects(n);if(r)throw r;if(!s)return;ae(a||[]);const v=(a||[])?.[0]?.project_id;v&&!l&&q(v)}catch(a){if(!s)return;console.error("Error loading projects:",a),f.error(K(a,"Unable to load projects"))}finally{s&&c(a=>({...a,projects:!1}))}}})(),()=>{s=!1}},[n,f]),i.useEffect(()=>{let s=!0;return(async()=>{if(n){if(!l){P([]);return}c(a=>({...a,models:!0}));try{const{data:a,error:r}=await b.from("models").select("*").eq("user_id",n).eq("project_id",l).order("trained_at",{ascending:!1}).limit(50);if(r)throw r;if(!s)return;P(a||[])}catch(a){if(!s)return;console.error("Error loading models:",a),P([])}finally{s&&c(a=>({...a,models:!1}))}}})(),()=>{s=!1}},[n,l]),i.useEffect(()=>{let s=!0;return(async()=>{if(!n||!l){I([]);return}c(a=>({...a,trainingRuns:!0}));try{const{data:a,error:r}=await b.from("training_runs").select("*").eq("user_id",n).eq("project_id",l).order("start_time",{ascending:!1}).limit(50);if(r)throw r;if(!s)return;I(a||[])}catch(a){if(!s)return;console.error("Error loading training runs:",a),I([])}finally{s&&c(a=>({...a,trainingRuns:!1}))}})(),()=>{s=!1}},[n,l]),i.useEffect(()=>{let s=!0;return(async()=>{if(n)try{const{data:a}=await b.from("ide_auth_tokens").select("last_sync_at").eq("user_id",n).order("issued_at",{ascending:!1}).limit(1),{data:r}=await b.from("ide_sync_events").select("created_at,sync_status,error_message,ide_version,ide_platform,event_data").eq("user_id",n).order("created_at",{ascending:!1}).limit(25);if(!s)return;const v=a?.[0]||null,E=r||[],N=(l?E.find(ce=>String(ce?.event_data?.project_id||"")===String(l)):null)||E[0]||null;V({lastSyncAt:v?.last_sync_at||null,lastSyncEventAt:N?.created_at||null,lastSyncEventStatus:N?.sync_status||null,lastSyncError:N?.error_message||null,lastIdeVersion:N?.ide_version||null,lastIdePlatform:N?.ide_platform||null})}catch(a){if(!s)return;console.error("Error loading sync health:",a),V({lastSyncAt:null,lastSyncEventAt:null,lastSyncEventStatus:null,lastSyncError:null,lastIdeVersion:null,lastIdePlatform:null})}})(),()=>{s=!1}},[n,l]),i.useEffect(()=>{let s=!0;return(async()=>{if(n){c(a=>({...a,exports:!0}));try{const{data:a,error:r}=await pe.getExports(n);if(r)throw r;if(!s)return;re(a||[])}catch(a){if(!s)return;console.error("Error loading exports:",a),f.error(K(a,"Unable to load exports"))}finally{s&&c(a=>({...a,exports:!1}))}}})(),()=>{s=!1}},[n,f]),i.useEffect(()=>{let s=!0;return(async()=>{if(!(!n||!y?.subscription_id)){c(a=>({...a,usage:!0,activity:!0}));try{const a=await _e(y.subscription_id);if(!s)return;if(a.data){const E=a.data.gpuUsage?.slice(-30).map((T,N)=>({date:new Date(T.usage_start).toISOString().split("T")[0],label:new Date(T.usage_start).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:parseFloat(T.hours_used||0)}))||[];ie(E)}const r=await ve({userId:n});if(!s)return;r.data&&ne(r.data.activities?.slice(0,10)||[]);const v=await je();if(!s)return;v.data&&le(v.data)}catch(a){console.error("Error loading usage/activity:",a)}finally{s&&c(a=>({...a,usage:!1,activity:!1}))}}})(),()=>{s=!1}},[n,y?.subscription_id]),i.useEffect(()=>{if(!n)return;const s=he(n,{usageTracking:o=>{console.log("Usage tracking updated:",o),(o.eventType==="INSERT"||o.eventType==="UPDATE")&&ge().then(a=>{a.data&&oe(a.data)})},subscription:o=>{console.log("Subscription updated:",o),Q().then(a=>{a.data&&W(a.data)})},ideSync:o=>{console.log("IDE sync event:",o),xe(n,50).then(a=>{a.data&&de(a.data.activities)})},models:()=>{},trainingRuns:()=>{},projects:()=>{}});return()=>{s()}},[n]),e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"dashHero",children:e.jsxs("div",{className:"container dashHero__inner",children:[e.jsx("p",{className:"dashHero__kicker",children:"Workspace"}),e.jsx("h1",{className:"dashHero__title",children:se}),e.jsx("p",{className:"dashHero__subtitle",children:"Metadata-only dashboard. No datasets, images, or models are uploaded."})]})}),e.jsx("section",{className:"dashSection",children:e.jsxs("div",{className:"container",children:[e.jsx("article",{className:"dashCard",style:{marginBottom:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"dashCard__title",children:"Project"}),e.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"13px",color:"var(--dr-muted)"},children:"Select a project to view observability. The dashboard observes. The IDE executes."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("select",{value:l,onChange:s=>q(s.target.value),className:"uiSelect",style:{minWidth:"280px"},disabled:_.projects||S.length===0,children:[e.jsx("option",{value:"",children:"Select a projectâ€¦"}),S.map(s=>e.jsxs("option",{value:s.project_id,children:[s.name," ",s.last_trained_at?`â€¢ last trained ${F(s.last_trained_at)}`:"â€¢ no activity yet"]},s.project_id))]}),e.jsx("span",{className:`dashStatus dashStatus--${u?.status||"archived"}`,style:{textTransform:"capitalize"},children:u?.status||(S.length?"Select project":"No projects")})]})]})}),e.jsxs("article",{className:"dashCard",style:{marginBottom:"16px"},children:[e.jsx("h2",{className:"dashCard__title",children:X.title}),e.jsx("div",{className:"dashRows",style:{marginTop:"12px"},children:X.items.map(s=>e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:s.title}),e.jsx("div",{className:"dashRow__value",children:s.detail})]},s.title))})]}),!l&&e.jsxs("article",{className:"dashCard",style:{marginBottom:"16px"},children:[e.jsx("h2",{className:"dashCard__title",children:"No project selected"}),e.jsxs("div",{className:"dashMuted",style:{marginTop:"10px"},children:["Choose a project above to view:",e.jsx("div",{style:{marginTop:"8px"},children:"- Dataset summary"}),e.jsx("div",{children:"- Training runs timeline"}),e.jsx("div",{children:"- Export artifacts"}),e.jsx("div",{children:"- Resource snapshots (when reported by the IDE)"})]})]}),t&&e.jsxs("article",{className:"dashCard",style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"dashCard__title",children:"Your Usage"}),t.usage.period_start&&e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"var(--dr-muted)"},children:[new Date(t.usage.period_start).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(t.usage.period_end).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:`button ${analyticsPeriod==="1d"?"button--primary":"button--outline"}`,style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>setAnalyticsPeriod("1d"),children:"1d"}),e.jsx("button",{className:`button ${analyticsPeriod==="7d"?"button--primary":"button--outline"}`,style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>setAnalyticsPeriod("7d"),children:"7d"}),e.jsx("button",{className:`button ${analyticsPeriod==="30d"?"button--primary":"button--outline"}`,style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>setAnalyticsPeriod("30d"),children:"30d"}),e.jsx("button",{className:`button ${analyticsPeriod==="all"?"button--primary":"button--outline"}`,style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>setAnalyticsPeriod("all"),children:"All"})]})]}),e.jsxs("div",{className:"usage-overview",children:[e.jsxs("div",{className:"usage-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:"Projects"}),e.jsxs("span",{style:{fontSize:"14px",color:"var(--dr-muted)"},children:[t.usage.projects_count||0," / ",t.limits.max_projects===-1?"âˆž":t.limits.max_projects]})]}),e.jsx("div",{className:"usage-progress",children:e.jsx("div",{className:"usage-progress__bar",style:{width:`${D(t.usage.projects_count||0,t.limits.max_projects)}%`,backgroundColor:d(t.usage.projects_count||0,t.limits.max_projects)?"#ef4444":x(t.usage.projects_count||0,t.limits.max_projects)?"#f59e0b":"#14b8a6"}})}),e.jsx(U,{current:t.usage.projects_count||0,limit:t.limits.max_projects,label:"projects",isSoftLimit:x(t.usage.projects_count||0,t.limits.max_projects),isHardLimit:d(t.usage.projects_count||0,t.limits.max_projects),onUpgrade:()=>h("/pricing")})]}),e.jsxs("div",{className:"usage-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:"Exports"}),e.jsxs("span",{style:{fontSize:"14px",color:"var(--dr-muted)"},children:[t.usage.exports_count||0," / ",t.limits.max_exports_per_month===-1?"âˆž":t.limits.max_exports_per_month]})]}),e.jsx("div",{className:"usage-progress",children:e.jsx("div",{className:"usage-progress__bar",style:{width:`${D(t.usage.exports_count||0,t.limits.max_exports_per_month)}%`,backgroundColor:d(t.usage.exports_count||0,t.limits.max_exports_per_month)?"#ef4444":x(t.usage.exports_count||0,t.limits.max_exports_per_month)?"#f59e0b":"#14b8a6"}})}),e.jsx(U,{current:t.usage.exports_count||0,limit:t.limits.max_exports_per_month,label:"exports",unit:" per month",isSoftLimit:x(t.usage.exports_count||0,t.limits.max_exports_per_month),isHardLimit:d(t.usage.exports_count||0,t.limits.max_exports_per_month),onUpgrade:()=>h("/pricing")})]}),e.jsxs("div",{className:"usage-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:"GPU Hours"}),e.jsxs("span",{style:{fontSize:"14px",color:"var(--dr-muted)"},children:[parseFloat(t.usage.gpu_hours_used?.toString()||"0").toFixed(1)," / ",t.limits.max_gpu_hours_per_month===-1?"âˆž":t.limits.max_gpu_hours_per_month]})]}),e.jsx("div",{className:"usage-progress",children:e.jsx("div",{className:"usage-progress__bar",style:{width:`${D(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)}%`,backgroundColor:d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)?"#ef4444":x(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)?"#f59e0b":"#14b8a6"}})}),e.jsx(U,{current:parseFloat(t.usage.gpu_hours_used?.toString()||"0"),limit:t.limits.max_gpu_hours_per_month,label:"GPU hours",unit:" hours",isSoftLimit:x(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month),isHardLimit:d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month),onUpgrade:()=>h("/pricing")})]}),e.jsxs("div",{className:"usage-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:"Training Runs"}),e.jsxs("span",{style:{fontSize:"14px",color:"var(--dr-muted)"},children:[t.usage.training_runs_count||0," / ",t.limits.max_training_runs_per_month===-1?"âˆž":t.limits.max_training_runs_per_month]})]}),e.jsx("div",{className:"usage-progress",children:e.jsx("div",{className:"usage-progress__bar",style:{width:`${D(t.usage.training_runs_count||0,t.limits.max_training_runs_per_month)}%`,backgroundColor:d(t.usage.training_runs_count||0,t.limits.max_training_runs_per_month)?"#ef4444":x(t.usage.training_runs_count||0,t.limits.max_training_runs_per_month)?"#f59e0b":"#14b8a6"}})}),e.jsx(U,{current:t.usage.training_runs_count||0,limit:t.limits.max_training_runs_per_month,label:"training runs",unit:" per month",isSoftLimit:x(t.usage.training_runs_count||0,t.limits.max_training_runs_per_month),isHardLimit:d(t.usage.training_runs_count||0,t.limits.max_training_runs_per_month),onUpgrade:()=>h("/pricing")})]})]}),(x(t.usage.projects_count||0,t.limits.max_projects)||x(t.usage.exports_count||0,t.limits.max_exports_per_month)||x(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)||d(t.usage.projects_count||0,t.limits.max_projects)||d(t.usage.exports_count||0,t.limits.max_exports_per_month)||d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month))&&e.jsx(fe,{title:[d(t.usage.projects_count||0,t.limits.max_projects),d(t.usage.exports_count||0,t.limits.max_exports_per_month),d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)].some(Boolean)?"Usage Limit Reached":"Approaching Usage Limits",message:[d(t.usage.projects_count||0,t.limits.max_projects),d(t.usage.exports_count||0,t.limits.max_exports_per_month),d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)].some(Boolean)?"You've reached one or more usage limits. Upgrade your plan to continue using all features.":"You're approaching your usage limits. Upgrade your plan to get more resources and avoid interruptions.",variant:[d(t.usage.projects_count||0,t.limits.max_projects),d(t.usage.exports_count||0,t.limits.max_exports_per_month),d(parseFloat(t.usage.gpu_hours_used?.toString()||"0"),t.limits.max_gpu_hours_per_month)].some(Boolean)?"error":"warning",onUpgrade:()=>h("/pricing")})]}),y?.plan_type==="free"&&!k&&e.jsx("div",{className:"dashCard",style:{marginBottom:"32px",border:"2px solid #14b8a6",background:"linear-gradient(135deg, #f0fdfa 0%, #ffffff 100%)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"Optional: unlock higher limits"}),e.jsx("p",{style:{margin:0,color:"var(--dr-muted)"},children:"If youâ€™re hitting limits (projects, exports, GPU hours), pick a plan that matches your workload."})]}),e.jsx("a",{className:"button button--primary",href:"/pricing",onClick:s=>{s.preventDefault(),h("/pricing")},children:"See plans"})]})}),k&&e.jsx("div",{className:"dashCard",style:{marginBottom:"32px",border:"2px solid #fbbf24",background:"#fef3c7"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"Trial Period Active"}),e.jsxs("p",{style:{margin:0,color:"var(--dr-muted)"},children:["Your trial ends on ",F(k.trial_end),". Choose a plan if you want higher limits after the trial."]})]}),e.jsx("a",{className:"button button--primary",href:"/pricing",onClick:s=>{s.preventDefault(),h("/pricing")},children:"Choose a plan"})]})}),l&&e.jsxs("div",{className:"dashGrid",children:[e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Project Overview"}),e.jsxs("div",{className:"dashRows",children:[e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Project"}),e.jsx("div",{className:"dashRow__value",children:u?.name||"â€”"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Task"}),e.jsx("div",{className:"dashRow__value",children:u?.task_type||"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Datasets"}),e.jsx("div",{className:"dashRow__value",children:Number(u?.dataset_count||0)})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last completed run"}),e.jsx("div",{className:"dashRow__value",children:u?.last_trained_at?j(u.last_trained_at):"No activity yet"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Total training runs"}),e.jsx("div",{className:"dashRow__value",children:_.trainingRuns?"Loadingâ€¦":m.length})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Total exports"}),e.jsx("div",{className:"dashRow__value",children:g.length})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last export format"}),e.jsx("div",{className:"dashRow__value",children:J?.format?J.format.toUpperCase():"No exports yet"})]})]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"System Status & Sync Health"}),e.jsxs("div",{className:"dashRows",children:[e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"IDE version"}),e.jsx("div",{className:"dashRow__value",children:p.lastIdeVersion||u?.ide_version||"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"IDE connection"}),e.jsx("div",{className:"dashRow__value",children:p.lastSyncEventAt?"Last seen recently (events available)":"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last sync"}),e.jsx("div",{className:"dashRow__value",children:p.lastSyncAt?j(p.lastSyncAt):"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Event backlog"}),e.jsx("div",{className:"dashRow__value",children:"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Compatibility"}),e.jsx("div",{className:"dashRow__value",children:"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last sync event"}),e.jsx("div",{className:"dashRow__value",children:p.lastSyncEventAt?e.jsxs(e.Fragment,{children:[j(p.lastSyncEventAt),p.lastSyncEventStatus?e.jsx("span",{className:`dashStatus dashStatus--${p.lastSyncEventStatus==="success"?"active":"deleted"}`,style:{marginLeft:"8px"},children:p.lastSyncEventStatus}):null]}):"No sync events yet"})]}),p.lastSyncError?e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last error"}),e.jsx("div",{className:"dashRow__value",children:p.lastSyncError})]}):null]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Resource Usage (Project-scoped)"}),e.jsx("p",{style:{margin:"0 0 12px 0",color:"var(--dr-muted)",fontSize:"13px"},children:"Snapshot-style summary derived from recorded training runs. Live GPU charts require IDE resource snapshot events."}),e.jsxs("div",{className:"dashRows",children:[e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"GPU hours (sum)"}),e.jsx("div",{className:"dashRow__value",children:z.totalGpuHours.toFixed(2)})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last GPU type"}),e.jsx("div",{className:"dashRow__value",children:z.lastGpuType||"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last GPU count"}),e.jsx("div",{className:"dashRow__value",children:z.lastGpuCount??"Not reported"})]})]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Dataset & Annotation Summary"}),e.jsx("p",{style:{margin:"0 0 12px 0",color:"var(--dr-muted)",fontSize:"13px"},children:"This project currently syncs dataset counts only. Detailed dataset versioning + annotation states are planned."}),e.jsxs("div",{className:"dashRows",children:[e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Dataset count"}),e.jsx("div",{className:"dashRow__value",children:Number(u?.dataset_count||0)})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Annotation status"}),e.jsx("div",{className:"dashRow__value",children:"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last annotation activity"}),e.jsx("div",{className:"dashRow__value",children:"Not reported"})]})]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Live / Recent Activity"}),e.jsxs("div",{className:"dashRows",children:[e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Run status"}),e.jsx("div",{className:"dashRow__value",children:_.trainingRuns?"Loadingâ€¦":m?.[0]?.status||"Idle"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Progress"}),e.jsx("div",{className:"dashRow__value",children:m?.[0]?.progress_percentage!=null?`${m[0].progress_percentage}%`:"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last metric snapshot"}),e.jsx("div",{className:"dashRow__value",children:m?.[0]?.final_metrics?JSON.stringify(m[0].final_metrics).slice(0,60)+"â€¦":"Not reported"})]}),e.jsxs("div",{className:"dashRow",children:[e.jsx("div",{className:"dashRow__label",children:"Last reported from IDE"}),e.jsx("div",{className:"dashRow__value",children:u?.updated_at?j(u.updated_at):"Not reported"})]})]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Training Runs Timeline"}),_.trainingRuns?e.jsx(G,{rows:3,columns:5}):e.jsxs("div",{className:"dashTable",children:[e.jsxs("div",{className:"dashTable__head",children:[e.jsx("div",{children:"Run"}),e.jsx("div",{children:"Dataset"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Start"}),e.jsx("div",{children:"Config ID"})]}),m.length===0?e.jsxs("div",{className:"dashTable__row dashTable__row--empty",children:[e.jsx("div",{className:"dashMuted",children:"No training runs recorded yet for this project."}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]}):m.map(s=>e.jsxs("div",{className:"dashTable__row",children:[e.jsx("div",{children:s.run_name||s.run_id}),e.jsx("div",{children:s.config?.dataset_version||"â€”"}),e.jsx("div",{children:e.jsx("span",{className:`dashStatus dashStatus--${s.status||"active"}`,children:s.status||"unknown"})}),e.jsx("div",{children:j(s.start_time)}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:"12px"},children:(s.ide_run_id||s.run_id||"â€”").toString().slice(0,10)})]},s.run_id||s.id))]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Models (metadata)"}),_.models?e.jsx(G,{rows:3,columns:5}):e.jsxs("div",{className:"dashTable",children:[e.jsxs("div",{className:"dashTable__head",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Type"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Trained"}),e.jsx("div",{children:"GPU hours"})]}),C.length===0?e.jsxs("div",{className:"dashTable__row dashTable__row--empty",children:[e.jsx("div",{className:"dashMuted",children:"No models recorded yet for this project."}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]}):C.map(s=>e.jsxs("div",{className:"dashTable__row",children:[e.jsx("div",{children:s.name}),e.jsx("div",{children:s.model_type}),e.jsx("div",{children:e.jsx("span",{className:`dashStatus dashStatus--${s.status||"active"}`,children:s.status||"unknown"})}),e.jsx("div",{children:j(s.trained_at||s.created_at)}),e.jsx("div",{children:Number(s.gpu_hours_used||0).toFixed(2)})]},s.model_id))]})]}),e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Model & Export Artifacts"}),_.exports?e.jsx(G,{rows:3,columns:4}):e.jsxs("div",{className:"dashTable",children:[e.jsxs("div",{className:"dashTable__head",children:[e.jsx("div",{children:"Model"}),e.jsx("div",{children:"Format"}),e.jsx("div",{children:"Exported"}),e.jsx("div",{children:"Project"})]}),g.length===0?e.jsxs("div",{className:"dashTable__row dashTable__row--empty",children:[e.jsx("div",{className:"dashMuted",children:"No exports recorded yet for this project."}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]}):g.map(s=>e.jsxs("div",{className:"dashTable__row",children:[e.jsx("div",{children:s.model_name}),e.jsx("div",{children:s.format?.toUpperCase?.()||"â€”"}),e.jsx("div",{children:F(s.exported_at)}),e.jsx("div",{children:u?.name||"â€”"})]},s.export_id))]})]})]}),e.jsxs("div",{className:"dashActions",style:{justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("a",{className:"button button--primary",href:"/download",onClick:s=>{s.preventDefault(),h("/download")},children:"Download Hub"}),(!y||y.plan_type==="free")&&e.jsx("a",{className:"button button--primary",href:"/pricing",onClick:s=>{s.preventDefault(),h("/pricing")},children:"Compare plans"}),e.jsx("a",{className:"button button--outline",href:"/docs",onClick:s=>{s.preventDefault(),h("/docs")},children:"View Docs"}),e.jsx("a",{className:"button button--outline",href:"/teams",onClick:s=>{s.preventDefault(),h("/teams")},children:"Teams"}),e.jsx("a",{className:"button button--outline",href:"/subscription",onClick:s=>{s.preventDefault(),h("/subscription")},children:"Subscription"})]}),e.jsx("button",{className:"button button--outline-dark",onClick:s=>{s.preventDefault(),ee()},type:"button",children:"Logout"})]})]})}),Y.length>0&&e.jsx("section",{className:"dashSection",children:e.jsx("div",{className:"container",children:e.jsxs("article",{className:"dashCard",children:[e.jsx("h2",{className:"dashCard__title",children:"Activity Timeline"}),e.jsx("p",{style:{margin:"0 0 24px 0",color:"var(--dr-muted)",fontSize:"14px"},children:"Recent IDE sync events and activities"}),_.activityTimeline?e.jsx("div",{style:{padding:"48px",textAlign:"center"},children:e.jsx(M,{})}):e.jsx("div",{className:"activity-timeline",children:Y.map((s,o)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-item__marker",children:s.status==="success"?"âœ“":s.status==="failed"?"âœ—":"â—‹"}),e.jsxs("div",{className:"timeline-item__content",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:s.type.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}),s.ideVersion&&e.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:"var(--dr-muted)",padding:"2px 6px",backgroundColor:"var(--dr-surface-2)",borderRadius:"4px"},children:["v",s.ideVersion]})]}),e.jsx("span",{style:{fontSize:"12px",color:"var(--dr-muted)"},children:j(s.timestamp)})]}),s.error&&e.jsxs("div",{style:{marginTop:"4px",padding:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",fontSize:"12px",color:"#991b1b"},children:["Error: ",s.error]}),s.data&&Object.keys(s.data).length>0&&e.jsxs("div",{style:{marginTop:"4px",fontSize:"12px",color:"var(--dr-muted)",fontFamily:"monospace"},children:[JSON.stringify(s.data,null,2).slice(0,100),"..."]})]})]},s.id))})]})})}),(R||A.length>0)&&e.jsx("section",{className:"dashSection",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"dashGrid",children:[R&&R.length>0&&e.jsxs("article",{className:"dashCard",style:{gridColumn:"span 2"},children:[e.jsx("h2",{className:"dashCard__title",children:"GPU Usage (Last 30 Days)"}),_.usage?e.jsx("div",{style:{padding:"48px",textAlign:"center"},children:e.jsx(M,{})}):e.jsx(ye,{data:R,type:"line",title:"GPU Hours",height:250})]}),A.length>0&&e.jsxs("article",{className:"dashCard",style:{gridColumn:"span 2"},children:[e.jsx("h2",{className:"dashCard__title",children:"Recent Activity"}),_.activity?e.jsx("div",{style:{padding:"48px",textAlign:"center"},children:e.jsx(M,{})}):e.jsx("div",{className:"activity-feed",children:A.map(s=>e.jsxs("div",{className:"activity-item",children:[e.jsx("div",{className:"activity-item__icon",children:s.activity_type==="login"?"ðŸ”":s.activity_type==="feature_used"?"âš¡":s.activity_type==="project_created"?"ðŸ“":"ðŸ“Š"}),e.jsxs("div",{className:"activity-item__content",children:[e.jsx("div",{className:"activity-item__title",children:s.activity_type.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}),e.jsx("div",{className:"activity-item__time",children:j(s.created_at)})]})]},s.activity_id))})]})]})})})]})}export{De as default};
