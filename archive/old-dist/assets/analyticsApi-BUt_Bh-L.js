import{s as i}from"./index-UkIvKgPy.js";async function y(e={}){try{let t=i.from("subscription_analytics").select("*").order("date",{ascending:!1});e.startDate&&(t=t.gte("date",e.startDate)),e.endDate&&(t=t.lte("date",e.endDate)),e.planType&&(t=t.eq("plan_type",e.planType));const{data:a,error:n}=await t.limit(100);if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error fetching subscription analytics:",t),{data:null,error:t}}}async function p(e={}){try{let t=i.from("revenue_analytics").select("*").order("date",{ascending:!1});e.startDate&&(t=t.gte("date",e.startDate)),e.endDate&&(t=t.lte("date",e.endDate)),e.planType&&(t=t.eq("plan_type",e.planType));const{data:a,error:n}=await t.limit(100);if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error fetching revenue analytics:",t),{data:null,error:t}}}async function g(e={}){try{let t=i.from("gpu_usage").select("*").order("usage_start",{ascending:!1});e.userId&&(t=t.eq("user_id",e.userId)),e.startDate&&(t=t.gte("usage_start",e.startDate)),e.endDate&&(t=t.lte("usage_end",e.endDate));const{data:a,error:n}=await t.limit(1e3);if(n)throw n;const s=a?.reduce((r,o)=>(r.totalHours+=parseFloat(o.hours_used||0),r.totalCost+=parseFloat(o.total_cost||0),r.count+=1,r),{totalHours:0,totalCost:0,count:0})||{totalHours:0,totalCost:0,count:0};return{data:{usage:a||[],totals:s},error:null}}catch(t){return console.error("Error fetching GPU usage:",t),{data:null,error:t}}}async function h(e={}){try{let t=i.from("user_activity").select("*").order("created_at",{ascending:!1});e.userId&&(t=t.eq("user_id",e.userId)),e.activityType&&(t=t.eq("activity_type",e.activityType)),e.startDate&&(t=t.gte("created_at",e.startDate)),e.endDate&&(t=t.lte("created_at",e.endDate));const{data:a,error:n}=await t.limit(1e3);if(n)throw n;const s=a?.reduce((r,o)=>{const c=o.activity_type;return r[c]||(r[c]=0),r[c]+=1,r},{})||{};return{data:{activities:a||[],grouped:s,total:a?.length||0},error:null}}catch(t){return console.error("Error fetching user activity:",t),{data:null,error:t}}}function f(e,t="export.csv"){if(!e||e.length===0){console.error("No data to export");return}const a=Object.keys(e[0]),n=[a.join(","),...e.map(c=>a.map(d=>{const u=c[d];return typeof u=="string"?`"${u.replace(/"/g,'""')}"`:u}).join(","))].join(`
`),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(s);r.setAttribute("href",o),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}export{y as a,p as b,g as c,f as e,h as g};
