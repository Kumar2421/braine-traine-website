import{u as w,r as a,j as e,s as N}from"./index-UkIvKgPy.js";function v(){const r=w(),[i,g]=a.useState(""),[p,x]=a.useState(!1),[l,c]=a.useState(!1),[d,m]=a.useState(""),[u,h]=a.useState(""),n=a.useMemo(()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.trim()),[i]),j=s=>{window.history.pushState({},"",s),window.dispatchEvent(new PopStateEvent("popstate")),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"loginShell",children:[e.jsxs("div",{className:"loginShell__left","aria-hidden":"true",children:[e.jsxs("div",{className:"loginHero",children:[e.jsxs("h1",{className:"loginHero__headline",children:["Reset your ",e.jsx("span",{className:"loginHero__highlight",children:"password"})]}),e.jsx("p",{className:"loginSubtitle",style:{marginTop:16,maxWidth:420},children:"Enter the email address you used to sign up. We’ll send you a secure link to set a new password."})]}),e.jsx("div",{className:"loginArt"})]}),e.jsx("div",{className:"loginShell__right",children:e.jsxs("div",{className:"loginPanel",children:[e.jsx("div",{className:"loginBrand",children:"ML FORGE"}),e.jsx("h1",{className:"loginTitle",children:"Forgot password"}),e.jsx("p",{className:"loginSubtitle",children:"We’ll email you a reset link."}),e.jsxs("form",{className:"loginForm",onSubmit:async s=>{if(s.preventDefault(),x(!0),m(""),h(""),!(!n||l))try{c(!0);const o=`${window.location.origin}/reset-password`,{error:t}=await N.auth.resetPasswordForEmail(i.trim(),{redirectTo:o});if(t)throw t;h("If an account exists for this email, a password reset link has been sent."),r.success("Check your email for the reset link")}catch(o){const t=o?.message||"Unable to send reset email. Please try again.";m(t),r.error(t)}finally{c(!1)}},children:[e.jsxs("label",{className:"loginLabel",children:["Email",e.jsx("input",{className:"loginInput",type:"email",placeholder:"name@company.com",autoComplete:"email",value:i,onChange:s=>g(s.target.value),disabled:l})]}),p&&!n&&e.jsx("div",{className:"loginHint",children:"Enter a valid email address."}),d&&e.jsx("div",{className:"loginHint",children:d}),u&&e.jsx("div",{className:"loginHint loginHint--success",children:u}),e.jsx("button",{className:"button button--primary loginSubmit",type:"submit",disabled:!n||l,children:l?"Sending…":"Send reset link"})]}),e.jsxs("div",{className:"loginRow loginRow--bottom",children:[e.jsx("span",{className:"loginMuted",children:"Remembered your password?"}),e.jsx("a",{className:"loginLink",href:"/login",onClick:s=>{s.preventDefault(),j("/login")},children:"Back to login"})]})]})})]})}export{v as default};
